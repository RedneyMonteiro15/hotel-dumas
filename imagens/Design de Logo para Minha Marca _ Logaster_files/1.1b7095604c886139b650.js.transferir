(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"0aEF":function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("TNoi"),o=a("ZL5I"),n=a("I/rG");class r extends o.a{constructor(t,e="1 0 0 1 0 0",a=null,o="left",n="LatoWebBold",r=1){super(),this.textKey=t,this.color=a,this.matrix=i.a.deserialize(e),this.align=o,this.font=n,this.lineHeight=r}draw(t,e,a,i,o,r){e.save(),null!==this.matrix&&this.matrix.setToContext2d(e);var s=n.a.LOGO_TEXT_SIZE,l=0,h=this.splitTexts(r);for(var d of(e.textAlign=this.align,e.fillStyle=this.color,e.font=`${s}px ${this.font}`,h))e.fillText(d,0,l),l+=Math.round(s*this.lineHeight);e.restore()}splitTexts(t){var e=[];return null!=t[this.textKey]&&(e=t[this.textKey].split("\n")),e}}},D6qv:function(t,e,a){"use strict";a.d(e,"a",function(){return G});var i=a("mrSG"),o=a("jtHE"),n=a("LRne"),r=a("R2xI"),s=a("B5yn"),l=a("vkgz"),h=a("eIep"),d=a("+6eH"),c=a("jO/Y"),g=a("zs7F"),u=a("wUTM"),m=a("I/rG"),w=a("UtAn"),_=a("AytR"),p=a("39nl"),b=a("04EX"),f=a("8DbQ"),T=a("8Bt/"),x=a("Y9WB"),v=a("fXoL"),E=a("KoW7"),I=a("IYfF"),S=a("tyNb"),L=a("tk/3");let G=(()=>{class t{constructor(t,e,a,i){this.translationsService=t,this.authService=e,this.router=a,this.http=i,this.brands$=new o.a(1),this.currentBrand$=new o.a(1),this.plans$=new o.a(1),this.socials$=new o.a(1),this.accountSrc$=new o.a(1),this.socialCategoriesList$=new o.a(1),this.socialProductMap$=new o.a(1),this.allBrandsIsLoading=!1,this.cached=!1,this.brandManager=new d.a}loadAllBrands(){this.brandManager.getAll().subscribe(t=>{this.brands$.next(this.deserializeBrands(t))})}deserializeBrands(t){return r.a.deserializeManyNg(t)}getAllBrands(){return this.brands$.asObservable()}cloneBrand(t){return this.brandManager.clone(t).pipe(Object(l.a)(()=>this.loadAllBrands()))}deleteBrand(t){return this.brandManager.delete(t).pipe(Object(l.a)(()=>this.loadAllBrands()))}loadDownloadAllBrand(t){return this.http.post(t,{})}loadAccountSource(t){return this.businessCardsNeedUpdate=!0,this.brandManager.get(t)}loadBusinessCards(t){return this.brandManager.getBusinessCard(t)}getPaymentStatus(t){return this.translationsService.getTranslation(s.b[t])}isPayedPlan(t){return s.a.includes(t)}isMaxPlan(t){return t===m.a.STATUS_L||t===m.a.STATUS_SUBSCRIPTION_PACK_20}openPriceLink(t){return Object(i.a)(this,void 0,void 0,function*(){if(!t)return;const e=`/pricing/?logoId=${t}&next=${encodeURIComponent(location.pathname)}`;if(this.isAnyPricingMode()){const t=this.router.parseUrl(e);t.queryParams.v=this.authService.getVerificationKey(),yield this.router.navigate(["/pricing"],{queryParams:t.queryParams})}else window.location.href=w.a.MAIN_URL+e})}isBriefUserFlow(){const t=this.authService.getPlanVersion();return g.a.isBriefUserflow(t)||g.a.isBriefV2(t)}isBriefV2(){const t=this.authService.getPlanVersion();return g.a.isBriefV2(t)}isAnyPricingMode(){const t=this.authService.getPlanVersion();return g.a.isPricing20(t)||g.a.isPricing20Premium(t)||g.a.isPricing20Selector(t)}isNgPricingV2(){const t=this.authService.getPlanVersion();return g.a.isNgPricingV2(t)}isMobileEdit(){const t=this.authService.getPlanVersion();return g.a.allowMobileEditor(t)}checkDefaultAccountByPV(){const t=this.authService.getPlanVersion();return g.a.isDefaultAccount(t)}cachePlans(t){this.plans=t,this.plans$.next(t)}applyBusinessCards(t,e){return e.businessCards=t.map(t=>c.a.deserialize(t,e)),this.businessCardsNeedUpdate=!1,e.businessCards}cacheSocials(t){this.socials$.next(t)}cacheCurrentBrand(t){this.currentBrand$.next(t)}cacheAccountSource(t){this.accountSrc=t}updateAccountSource(t,e){switch(e){case u.b.LETTERHEAD:const e=this.accountSrc.letterheads.filter(e=>e.number!==t.number);return void(this.accountSrc=Object.assign(Object.assign({},this.accountSrc),{letterheads:[...e,t]}));case u.b.EMAIL_SIGNATURE:const a=this.accountSrc.emailSignatures.filter(e=>e.number!==t.number);return void(this.accountSrc=Object.assign(Object.assign({},this.accountSrc),{emailSignatures:[...a,t]}));default:throw new Error("Unreachable statement")}}loadSocialCategories(){return this.http.get(_.a.getSocialCategories).pipe(Object(h.a)(t=>(this.socialCategoriesList$.next(t.map(t=>p.a.deserialize(t))),Object(n.a)(!0))))}getSocialCategories(){return this.socialCategoriesList$.asObservable()}loadSocialProducts(t){return this.http.get(_.a.getSocialProduct+t.id).pipe(Object(h.a)(e=>{const a=[];return e.socialProductTemplates.forEach((e,i)=>{const o=b.a.deserialize(e,t),n=f.a.create(t,o);a.push({showcase:this.getShowcase(n),categoryId:this.getMockCategoryId(i),showcaseSizes:{width:n.width,height:n.height}})}),this.socialProductMap$.next(a),Object(n.a)(!0)}))}getShowcase(t){return new T.a(0,[new x.a(t,t.width,t.height,"1 0 0 1 0 0")])}getMockCategoryId(t){return t>=0&&t<7?1:t>=7&&t<10?2:t>=10&&t<16?3:16===t?4:17===t?5:18===t?6:19===t?7:20===t?8:21===t?9:void 0}getSocialProducts(){return this.socialProductMap$.asObservable()}getCurrentBrand(){return this.currentBrand$.asObservable()}getPlans(){return this.plans$.asObservable()}getSocials(){return this.socials$.asObservable()}isAddProductStepper(){const t=this.authService.getPlanVersion();return g.a.isAddProductStepper(t)}}return t.\u0275fac=function(e){return new(e||t)(v.Vb(E.a),v.Vb(I.a),v.Vb(S.d),v.Vb(L.a))},t.\u0275prov=v.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},LeAA:function(t,e,a){"use strict";a.d(e,"a",function(){return p});var i=a("mPvw"),o=a("Imjg"),n=a("TNoi"),r=a("xbbs"),s=a("NwTh");class l{constructor(t,e){this._item=null,this.context2d=null,this.transformable=null,this.trimLine=0,this._item=t,this.context2d=e}get transformableWidth(){return this.item.bounds.width}get transformableHeight(){return this.item.bounds.height}get item(){return this._item}fromBasis(){var t=this.item.maths.matrix.clone();return t.scale(this.context2d.canvas.width/(this.item.product.widthMm+2*this.trimLine),this.context2d.canvas.height/(this.item.product.heightMm+2*this.trimLine)),t}toBasis(t){var e=new n.a;return e.scale(this.context2d.canvas.width/(this.item.product.widthMm+2*this.trimLine),this.context2d.canvas.height/(this.item.product.heightMm+2*this.trimLine)),e.invert(),t.concat(e),t}draw(){this.context2d.save();var t=this.getMatrixForContext2d();this.item.fill.getColorCombination(this.item.product.brand.colorRange).getFill(null).toContext2d(this.context2d,this.item.bounds),this.drawItem(t),this.context2d.restore()}drawItem(t){t.translate(this.trimLine*(this.context2d.canvas.width/(this.item.product.widthMm+2*this.trimLine)),this.trimLine*(this.context2d.canvas.height/(this.item.product.heightMm+2*this.trimLine)))}resetTransformable(){this.transformable=null}initializeTransformable(){this.transformable=new r.a(this.transformableWidth,this.transformableHeight,this.getMatrixForTransformable(),this)}getMatrixForTransformable(){var t=new n.a;return t.translate(this._item.bounds.x,this._item.bounds.y),t.concat(this.fromBasis()),t}drawBorder(){var t=this.transformable.matrix.transformPoint(new s.a(0,0)),e=this.transformable.matrix.transformPoint(new s.a(this.transformable.width,0)),a=this.transformable.matrix.transformPoint(new s.a(this.transformable.width,this.transformable.height)),i=this.transformable.matrix.transformPoint(new s.a(0,this.transformable.height));this.context2d.save(),this.context2d.strokeStyle="#9c9c9c",this.context2d.lineWidth=1,this.context2d.beginPath(),this.context2d.moveTo(t.x,t.y),this.context2d.lineTo(e.x,e.y),this.context2d.lineTo(a.x,a.y),this.context2d.lineTo(i.x,i.y),this.context2d.lineTo(t.x,t.y),this.context2d.stroke(),this.context2d.restore()}getMatrixFromTransformable(){var t=this.transformable.matrix.clone(),e=new n.a;return e.translate(this._item.bounds.x,this._item.bounds.y),e.invert(),e.concat(t),e}getMatrixForContext2d(){return null!==this.transformable?this.getMatrixFromTransformable():this.fromBasis()}saveItemTransform(){var t=this.getMatrixFromTransformable();this._item.maths.matrix=this.toBasis(t)}loadDynamic(t){return Promise.resolve()}}let h=(()=>{class t extends l{constructor(){super(...arguments),this._fitBoundsMatrix=null,this._tm=null}get item(){return this._item}get fitBoundsMatrix(){return null===this._fitBoundsMatrix&&(this._fitBoundsMatrix=this.calculateFitBoundsMatrix()),this._fitBoundsMatrix}drawItem(t){super.drawItem(t),t.setToContext2d(this.context2d);var e=this.item.fill.getColorCombination(this.item.product.brand.colorRange).getFill(null),a=o.a.changeEmblemAppearance(this.item.svg,e);this.drawSvg(a)}drawSvg(e){null==t.canvgOptions&&(t.canvgOptions={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:0,scaleHeight:0}),i(this.context2d.canvas,e,t.canvgOptions)}calculateFitBoundsMatrix(){var t=new n.a;return t.translate(-this.item.svgBounds.x,-this.item.svgBounds.y),t.scale(this.item.bounds.width/this.item.svgBounds.width,this.item.bounds.height/this.item.svgBounds.height),t.translate(this.item.bounds.x,this.item.bounds.y),t}fromBasis(){var t=this.fitBoundsMatrix.clone();return t.concat(super.fromBasis()),t}toBasis(t){t=super.toBasis(t);var e=this.fitBoundsMatrix.clone();return e.invert(),t.concat(e),t}initializeTransformable(){this.transformable=new r.a(this.item.svgBounds.width,this.item.svgBounds.height,this.getMatrixForTransformable(),this)}getMatrixForTransformable(){return null===this._tm&&(this._tm=this.fromBasis()),this._tm}getMatrixFromTransformable(){return this.transformable.matrix.clone()}}return t.canvgOptions=null,t})();var d=a("ehg8"),c=a("gwEI");class g extends l{constructor(){super(...arguments),this.logoView=null,this.tempContext2d=null}get item(){return this._item}drawItem(t){super.drawItem(t),this.tempContext2d=c.a.forBrandProductItem(this.context2d.canvas.width,this.context2d.canvas.height),null===this.logoView&&(this.logoView=new d.a(this.tempContext2d),this.logoView.padding=0,this.logoView.traceRect=this.item.bounds),this.logoView.offsetMatrix=t,this.logoView.logo=this.item.logo,this.logoView.draw(this.item.fill.getColorCombination(this.item.product.brand.colorRange)),this.context2d.drawImage(this.tempContext2d.canvas,0,0)}}class u extends l{constructor(){super(...arguments),this.traceRect=null}get item(){return this._item}get transformableWidth(){return this.item.bounds.width}get transformableHeight(){return this.item.bounds.height}drawItem(t){if(this.item.imageLoaded){super.drawItem(t);let e=this.item.calculateAlignMatrix();e.concat(t),e.setToContext2d(this.context2d),this.context2d.drawImage(this.item.image,0,0,this.item.bounds.width,this.item.bounds.height)}else{let e=this;this.item.loadDynamic().then(()=>{super.drawItem(t);let a=e.item.calculateAlignMatrix();a.concat(t),a.setToContext2d(e.context2d),e.context2d.drawImage(e.item.image,0,0,e.item.bounds.width,e.item.bounds.height)})}}}var m=a("hrmL"),w=a("8DbQ");class _ extends l{get item(){return this._item}initializeTransformable(){var t=this._item.bounds.width,e=this._item.bounds.height;(t<=0||e<=0)&&(t=10,e=this.item.font.capHeightPx()),this.transformable=new r.a(t,e,this.getMatrixForTransformable(),this)}drawItem(t){super.drawItem(t),this.context2d.font=`${w.a.TEXT_SIZE}px '${this.item.font.fontFamily}'`;for(var e=this.item.content.split("\n"),a=0;a<e.length;a++){var i=e[a];if(a>0){var o=new n.a;o.translate(0,Math.round(1.2*w.a.TEXT_SIZE)),o.concat(t),t=o}if(0===this.item.maths.kerning)t.setToContext2d(this.context2d),this.context2d.fillText(i,0,0);else{var r=i.split(""),s=0,l=new n.a;for(a=0;a<r.length;a++){var h=r[a],d=this.item.font.glyphWidth(h);a>0&&(s+=this.item.font.kerning(r[a-1],h),s+=this.item.maths.kerning),l.identity(),l.translate(this.item.font.fUnitsToPx(s),0),l.concat(t),l.setToContext2d(this.context2d),this.context2d.fillText(h,0,0),s+=d}}}}}class p{constructor(t,e,a){this._forceInit=!0,this.context2d=null,this.items=[],this.watermark=null,this.debugMode=!1,this.trimLine=0,this._product=e,t.canvas.oncontextmenu=function(){return!1},this.context2d=t,this.itemsGroup=a}get product(){return this._product}set product(t){this._product=t,this._forceInit=!0}init(){if(this._forceInit||!(this.items.length>0)){this.items.length=0;for(let e of this._product.items)if(e.group===this.itemsGroup){var t=this.createItemView(e);this.items.push(t)}this._forceInit=!1}}draw(){this.init(),this.clear(),this.context2d.save(),this.context2d.fillStyle="#ffffff",this.context2d.fillRect(0,0,this.context2d.canvas.width,this.context2d.canvas.height),this.context2d.restore();for(let t of this.items)t.trimLine=this.trimLine,t.draw()}clear(){n.a.resetContext2d(this.context2d),this.context2d.clearRect(0,0,this.context2d.canvas.width,this.context2d.canvas.height)}createItemView(t){var e=null;switch(t.type){case m.a.TEXT:e=new _(t,this.context2d);break;case m.a.LOGO:e=new g(t,this.context2d);break;case m.a.SVG:e=new h(t,this.context2d);break;case m.a.Image:e=new u(t,this.context2d)}return e}}},Qsv7:function(t,e,a){"use strict";a.d(e,"a",function(){return S});var i=a("I/rG"),o=a("TNoi"),n=a("ZL5I");class r extends n.a{constructor(t,e="1 0 0 1 0 0"){super(),this.width=380,this.height=420,this.matrix=o.a.deserialize(e),this.fontFamily=t}draw(t,e,a,i,n){e.save();let r=0,s=new o.a;null!==this.matrix&&s.concat(this.matrix),r+=140,this.drawText(e,"Aa",this.fontFamily,140,r,s),r+=68,this.drawText(e,this.fontFamily,"LatoWebBold",22,r,s),r+=82,this.drawText(e,"ABCDEFGHIJKLM",this.fontFamily,26,r,s),r+=31.2,this.drawText(e,"NOPQRSTUVWXYZ",this.fontFamily,26,r,s),r+=31.2,this.drawText(e,"abcdefghijklm",this.fontFamily,26,r,s),r+=31.2,this.drawText(e,"nopqrstuvwxyz",this.fontFamily,26,r,s),r+=31.2,this.drawText(e,"1234567890",this.fontFamily,26,r,s),e.restore()}drawText(t,e,a,n,r,s){let l=new o.a,h=n/i.a.LOGO_TEXT_SIZE;l.scale(h,h),l.concat(s),l.translate(0,r),l.setToContext2d(t),t.font=`${i.a.LOGO_TEXT_SIZE}px ${a}`,t.fillText(e,0,0)}}var s=a("RG/v"),l=a("SNl6"),h=a("gLuL"),d=a("zjvR"),c=a("0aEF"),g=a("zjVz"),u=a("8Bt/"),m=a("YDEh"),w=a("Eq80"),_=a("8Jal"),p=a("WVmJ"),b=a("NwTh"),f=a("uBS0"),T=a("mrhZ"),x=a("ehg8"),v=a("Go6F");class E extends x.a{constructor(t){super(t),this.context2d.canvas.height=1.5*this.context2d.canvas.height,this.context2d.canvas.width=1.5*this.context2d.canvas.width}postDraw(t){let e=this.getOffset(t),a=e.paddingChar,n=e.font,r=e.matrix,s=e.charBounds,l=new p.a("CCCCCC"),h=null,d=null,c=this.logo.getBounds(),g=t.transformPoint(c.topLeft),u=t.transformPoint(c.bottomRight);c=new T.a(g.x,g.y,u.x-g.x,u.y-g.y),this.context2d.save(),l.toContext2d(this.context2d),this.context2d.font=`${i.a.LOGO_TEXT_SIZE}px '${n.fontFamily}'`;let m=new o.a;m.translate(-s.x,-s.y),m.translate(this.width/2-s.width/2,c.y-s.height),r.concat(m),r.setToContext2d(this.context2d),this.context2d.fillText(a,0,0),r.translate(0,c.height+s.height),r.setToContext2d(this.context2d),this.context2d.fillText(a,0,0),r.translate(-(c.width/2+s.width/2),-(c.height/2+s.height/2)),m=r.clone(),h=new b.a(c.x-s.width,c.y+c.height/2-s.height/2),d=new b.a(s.width/2,s.height/2),m.rotatePoint(-Math.PI/2,h,d),m.translate((s.width-s.height)/2,0),m.setToContext2d(this.context2d),this.context2d.fillText(a,0,0),m.rotatePoint(Math.PI,h,d),m.translate(c.width+s.width,0),m.setToContext2d(this.context2d),this.context2d.fillText(a,0,0),o.a.resetContext2d(this.context2d),this.context2d.lineWidth=1,this.context2d.strokeStyle=l.hex,this.context2d.strokeRect(c.x-s.height,c.y-s.height,c.width+2*s.height,c.height+2*s.height),this.context2d.strokeRect(c.x,c.y,c.width,c.height),this.context2d.restore()}getOffset(t){let e=this.logo.getLogoNameItem();if(!e)return;let a=e.font,n=f.a.transform(e.text.substring(0,1),e.transform),r=e.maths.matrix.clone();r.concat(t);let s=v.a.calculateTransformationFactors(r),l=2*Math.PI-s.radiansAngle;r.rotate(l),r.a=Math.abs(r.a),r.d=Math.abs(r.d);let h=_.a.getBounds(n,i.a.LOGO_TEXT_SIZE,a.fontFamily),d=r.transformPoint(h.topLeft),c=r.transformPoint(h.bottomRight),g=new T.a(d.x,d.y,c.x-d.x,c.y-d.y),u=g.height,m=Math.max(this.context2d.canvas.width,this.context2d.canvas.height),w=m/(m+2*u+4*this.context2d.lineWidth),p=new o.a(1,0,0,1,u,u),b=new o.a(w,0,0,w,0,0);return p.concat(b),{paddingChar:n,charBounds:g,font:a,matrix:r,offsetMatrix:p}}}class I extends w.a{constructor(t,e,a,i,o=null,n=!1,r=m.a.EL_LOGO1){super(t,e,a,i,o,n,r),this.viewClass=E}}class S extends g.a{constructor(){super(...arguments),this.model="font_colors_guidelines",this.type="",this.FontsColorsGuideline=new u.a(0,[new l.a("brandbook/fcg_01.png",m.a.BG_WHITE),new l.a("brandbook/fcg_02.png",m.a.BG_WHITE,m.a.EL_LOGO1),new l.a("brandbook/fcg_03.png",m.a.BG_WHITE,m.a.EL_LOGO2),new d.a([new w.a(i.a.HORIZONTAL,870,450,"1 0 0 1 560 115",m.a.BG_B,!1)]),new c.a("typo","1.5 0 0 1.5 170 760","#747474"),new h.a("1 0 0 1 170 841",726,577,"#CCCCCC"),new c.a("colors","1.5 0 0 1.5 1110 760","#747474"),new c.a("pcolor","1.3 0 0 1.3 1283 900","#CCCCCC","center"),new c.a("scolor","1.3 0 0 1.3 1681 900","#CCCCCC","center"),new c.a("pchex","1.2 0 0 1.2 1200 1270","#747474"),new c.a("pcr","1.2 0 0 1.2 1200 1330","#747474"),new c.a("pcg","1.2 0 0 1.2 1200 1365","#747474"),new c.a("pcb","1.2 0 0 1.2 1200 1400","#747474"),new c.a("schex","1.2 0 0 1.2 1600 1270","#747474"),new c.a("scr","1.2 0 0 1.2 1600 1330","#747474"),new c.a("scg","1.2 0 0 1.2 1600 1365","#747474"),new c.a("scb","1.2 0 0 1.2 1600 1400","#747474")]),this.downloadMap={fcgpdf:{showcase:this.FontsColorsGuideline,format:i.a.IMAGE_FORMAT_PDF,width:2e3,height:1602},bbpdf:{showcase:this.BBFirstPage,format:i.a.IMAGE_FORMAT_PDF,width:1200,height:848}}}initBBShowcases(){this.BBFirstPage=new u.a(0,[new l.a("brandbook/bb_background.png",m.a.BG_WHITE,m.a.EL_LOGO1),new d.a([new w.a(i.a.HORIZONTAL,458,192,"1 0 0 1 371 299",m.a.BG_B,!0)]),new c.a("logoguide","1.46 0 0 1.46 598 700","#FFFFFF","center","LatoWebBold"),new c.a("bylogaster","0.94 0 0 0.94 598 754","#FFFFFF","center","LatoWebLight")]),this.BBLogoGuide=new u.a(0,[new l.a("brandbook/bb_2_element1.png"),new c.a("yourlogoguide","3.28 0 0 3.28 60 130","#CCCCCC"),new l.a("brandbook/bb_2_element2.png",m.a.BG_B),new d.a([new w.a(i.a.HORIZONTAL,387,162,"1 0 0 1 141 327",m.a.BG_B,!0),new w.a(i.a.ICON,100,100,"1 0 0 1 729 322",m.a.BG_WHITE,!1,m.a.EL_LOGO1),new w.a(i.a.ICON,100,100,"1 0 0 1 981 322",m.a.BG_B,!1,m.a.EL_LOGO1),new w.a(i.a.ICON,100,100,"1 0 0 1 729 606",null,!1,"000000"),new w.a(i.a.ICON,100,100,"1 0 0 1 981 606",m.a.BG_BLACK,!1,m.a.EL_LOGO1)]),new c.a("logocolors1","0.65 0 0 0.65 60 580","#000000","left","LatoWebLight",1.55),new c.a("logocolors2","0.65 0 0 0.65 779 484","#000000","center","LatoWebLight",1.25),new c.a("logocolors3","0.65 0 0 0.65 1035 484","#000000","center","LatoWebLight",1.25),new c.a("logocolors4","0.65 0 0 0.65 779 768","#000000","center","LatoWebLight",1.25),new c.a("logocolors5","0.65 0 0 0.65 1035 768","#000000","center","LatoWebLight",1.25)]),this.BBSafetyArea=new u.a(0,[new l.a("brandbook/bb_background.png",m.a.BG_WHITE),new c.a("bbsafetyarea","3.36 0 0 3.36 60 130","#CCCCCC"),new c.a("bbhorizontallogowithtagline","0.65 0 0 0.65 60 465","#000000","left","LatoWebLight",1.4),new c.a("bbhorizontallogo","0.65 0 0 0.65 474 465","#000000","left","LatoWebLight",1.4),new c.a("bbverticallogowithtagline","0.65 0 0 0.65 60 775","#000000","left","LatoWebLight",1.4),new c.a("bbverticallogo","0.65 0 0 0.65 340 775","#000000","left","LatoWebLight",1.4),new c.a("bbsmallsizelogowithtagline","0.65 0 0 0.65 613 775","#000000","left","LatoWebLight",1.4),new c.a("bbsmallsizeLogowithouttagline","0.65 0 0 0.65 885 775","#000000","left","LatoWebLight",1.4),new c.a("bbsafetyareadescription","0.65 0 0 0.65 881 220","#000000","left","LatoWebLight",1.4),new d.a([new I(i.a.HORIZONTAL,172,143,"1 0 0 1 60 278",m.a.BG_WHITE,!0),new I(i.a.HORIZONTAL,172,143,"1 0 0 1 474 278",m.a.BG_WHITE,!1),new I(i.a.VERTICAL,172,143,"1 0 0 1 60 534",m.a.BG_WHITE,!0),new I(i.a.VERTICAL,172,143,"1 0 0 1 340 534",m.a.BG_WHITE,!1),new I(i.a.TEXT,172,143,"1 0 0 1 613 534",m.a.BG_WHITE,!0),new I(i.a.TEXT,172,143,"1 0 0 1 885 534",m.a.BG_WHITE,!1)])]),this.BBLogoLayouts=new u.a(0,[new l.a("brandbook/bb_background.png",m.a.BG_WHITE),new l.a("brandbook/bb_4_elements.png"),new c.a("logolayouts","3.28 0 0 3.28 60 130","#CCCCCC"),new d.a([new w.a(i.a.HORIZONTAL,166,68,"1 0 0 1 86 496",m.a.BG_WHITE,!0),new w.a(i.a.HORIZONTAL,176,58,"1 0 0 1 362 501",m.a.BG_WHITE,!1),new w.a(i.a.VERTICAL,98,118,"1 0 0 1 667 449",m.a.BG_WHITE,!0),new w.a(i.a.VERTICAL,108,110,"1 0 0 1 937 451",m.a.BG_WHITE,!1),new w.a(i.a.TEXT,94,57,"1 0 0 1 684 99",m.a.BG_WHITE,!0),new w.a(i.a.TEXT,106,46,"1 0 0 1 953 114",m.a.BG_WHITE,!1)]),new c.a("texttagline","0.89 0 0 0.89 640 211","#000000"),new c.a("text","0.89 0 0 0.89 915 211","#000000"),new c.a("horiztagline","0.89 0 0 0.89 59 624","#000000"),new c.a("horiz","0.89 0 0 0.89 339 624","#000000"),new c.a("verttagline","0.89 0 0 0.89 641 624","#000000"),new c.a("vert","0.89 0 0 0.89 915 624","#000000"),new c.a("logolayouts1","0.65 0 0 0.65 60 265","#000000","left","LatoWebLight",1.55),new c.a("logolayouts2","0.49 0 0 0.49 640 264","#000000","left","LatoWebLight",1.36),new c.a("logolayouts3","0.49 0 0 0.49 915 264","#000000","left","LatoWebLight",1.36),new c.a("logolayouts4","0.49 0 0 0.49 60 672","#000000","left","LatoWebLight",1.36),new c.a("logolayouts5","0.49 0 0 0.49 340 672","#000000","left","LatoWebLight",1.36),new c.a("logolayouts6","0.49 0 0 0.49 641 672","#000000","left","LatoWebLight",1.36),new c.a("logolayouts7","0.49 0 0 0.49 915 672","#000000","left","LatoWebLight",1.36)]),this.BBPalette=new u.a(0,[new l.a("brandbook/bbp_1_content.png",m.a.BG_WHITE),new l.a("brandbook/bbp_2_main_color.png",m.a.BG_WHITE,m.a.EL_LOGO1),new l.a("brandbook/bbp_3_secondary_color.png",m.a.BG_WHITE,m.a.EL_LOGO2),new l.a("brandbook/bbp_4_1st_design_element.png",m.a.BG_WHITE,m.a.EL_DESIGN1),new l.a("brandbook/bbp_5_2nd_design_element.png",m.a.BG_WHITE,m.a.EL_DESIGN2),new c.a("bbcolors","3.28 0 0 3.28 60 130","#CCCCCC"),new c.a("bbpcolor","0.93 0 0 0.93 159 381","#FFFFFF","center"),new c.a("bbscolor","0.93 0 0 0.93 440 381","#FFFFFF","center"),new c.a("bbfelement","1 0 0 1 720 361","#FFFFFF","center"),new c.a("bbselement","1 0 0 1 999 361","#000000","center"),new c.a("forweb","0.89 0 0 0.89 58 541","#000000"),new c.a("forweb","0.89 0 0 0.89 337 541","#000000"),new c.a("forweb","0.89 0 0 0.89 618 541","#000000"),new c.a("forweb","0.89 0 0 0.89 898 541","#000000"),new c.a("pchex","0.65 0 0 0.65 58 564","#000000","left","LatoWebLight"),new c.a("schex","0.65 0 0 0.65 337 564","#000000","left","LatoWebLight"),new c.a("fsthex","0.65 0 0 0.65 618 564","#000000","left","LatoWebLight"),new c.a("sndhex","0.65 0 0 0.65 898 564","#000000","left","LatoWebLight"),new c.a("pcrgb","0.65 0 0 0.65 58 589","#000000","left","LatoWebLight"),new c.a("scrgb","0.65 0 0 0.65 337 589","#000000","left","LatoWebLight"),new c.a("fstrgb","0.65 0 0 0.65 618 589","#000000","left","LatoWebLight"),new c.a("sndrgb","0.65 0 0 0.65 898 589","#000000","left","LatoWebLight"),new c.a("forprint","0.89 0 0 0.89 58 636","#000000"),new c.a("forprint","0.89 0 0 0.89 337 636","#000000"),new c.a("forprint","0.89 0 0 0.89 618 636","#000000"),new c.a("forprint","0.89 0 0 0.89 898 636","#000000"),new c.a("pccmyk","0.65 0 0 0.65 58 661","#000000","left","LatoWebLight"),new c.a("sccmyk","0.65 0 0 0.65 337 661","#000000","left","LatoWebLight"),new c.a("fstcmyk","0.65 0 0 0.65 618 661","#000000","left","LatoWebLight"),new c.a("sndcmyk","0.65 0 0 0.65 898 661","#000000","left","LatoWebLight")]),this.BBColorVariations=new u.a(0,[new l.a("brandbook/bbc_1_content.png",m.a.BG_WHITE),new l.a("brandbook/bbc_2_main_color.png",m.a.BG_WHITE,m.a.EL_LOGO1),new c.a("bbbackgroundscolors","3.28 0 0 3.28 60 130","#CCCCCC"),new c.a("bblogowhitebg","0.89 0 0 0.89 355 292","#000000"),new c.a("bblogowhitebgdescription","0.49 0 0 0.49 355 337","#000000","left","LatoWebLight",1.36),new c.a("bbblackwhite","0.89 0 0 0.89 919 292","#000000"),new c.a("bbblackwhitedescription","0.49 0 0 0.49 920 340","#000000","left","LatoWebLight",1.36),new c.a("bbcorporatebg","0.89 0 0 0.89 355 473","#000000"),new c.a("bblogocorporatebgdescription","0.49 0 0 0.49 355 517","#000000","left","LatoWebLight",1.36),new c.a("bbnegative","0.89 0 0 0.89 919 473","#000000"),new c.a("bbnegativedescription","0.49 0 0 0.49 920 496","#000000","left","LatoWebLight",1.36),new c.a("bbtransparentbg","0.89 0 0 0.89 355 653","#000000"),new c.a("bbtransparentbgdescription","0.49 0 0 0.49 355 699","#000000","left","LatoWebLight",1.36),new d.a([new w.a(i.a.HORIZONTAL,216,70,"1 0 0 1 86 307",m.a.BG_WHITE,!1),new w.a(i.a.HORIZONTAL,216,70,"1 0 0 1 652 307",m.a.BG_WHITE,!1,"000000"),new w.a(i.a.HORIZONTAL,216,70,"1 0 0 1 86 488",m.a.BG_B,!1),new w.a(i.a.HORIZONTAL,216,70,"1 0 0 1 652 488",m.a.BG_BLACK,!1),new w.a(i.a.HORIZONTAL,216,70,"1 0 0 1 86 669",m.a.BG_TRANSPARENT,!1)])]),this.BBDesignElements1=new u.a(0,[new l.a("brandbook/bb_elements_1_bg_image.png",m.a.BG_WHITE),new l.a("brandbook/bb_elements_1_main_colour.png",m.a.BG_B),new l.a("brandbook/bb_elements_1_1_element.png",m.a.BG_WHITE,m.a.EL_DESIGN1),new l.a("brandbook/bb_elements_1_2_element.png",m.a.BG_WHITE,m.a.EL_DESIGN2),new l.a("brandbook/bb_elements_1_top_shadow.png",m.a.BG_WHITE,m.a.EL_DESIGN2),new d.a([new w.a(i.a.HORIZONTAL,129,54,"1 -0.232 0.232 1 166.615 128",m.a.BG_WHITE,!0),new w.a(i.a.HORIZONTAL,98,41,"1 -0.367 0.367 1 55 392",m.a.BG_WHITE,!0),new w.a(i.a.ICON,25,25,"1 0.25 -0.25 1 819 479",m.a.BG_B,!1)])]),this.BBDesignElements2=new u.a(0,[new l.a("brandbook/bb_elements_2_bg_image.png",m.a.BG_WHITE),new l.a("brandbook/bb_elements_2_main_colour.png",m.a.BG_B),new l.a("brandbook/bb_elements_2_1_element.png",m.a.BG_WHITE,m.a.EL_DESIGN1),new l.a("brandbook/bb_elements_2_2_element.png",m.a.BG_WHITE,m.a.EL_DESIGN2),new d.a([new w.a(i.a.HORIZONTAL,64,20,"1 0 0 1 59 49",m.a.BG_WHITE,!1),new w.a(i.a.VERTICAL,98,118,"1 0 0 1 108 282",null,!0,"777777"),new w.a(i.a.HORIZONTAL,84,26,"1 0 0 1 319 324",m.a.BG_B,!1),new w.a(i.a.HORIZONTAL,100,40,"1 0 0 1 755 81",m.a.BG_WHITE,!0),new w.a(i.a.HORIZONTAL,170,69,"1 0 0 1 944 108",m.a.BG_B,!0),new w.a(i.a.HORIZONTAL,146,59,"1 0 0 1 643 308",m.a.BG_WHITE,!0),new w.a(i.a.ICON,27,27,"1 0 0 1 445 524",m.a.BG_B,!1),new w.a(i.a.ICON,9,9,"1 0.15 -0.15 1 267 713",m.a.BG_B,!1)])]),this.BBLogaster=new u.a(0,[new l.a("brandbook/bb_last_page_bg.png",m.a.BG_WHITE,m.a.EL_LOGO1),new l.a("brandbook/bb_logaster_logo.png",m.a.EL_LOGO1),new c.a("www.logaster.com","0.91 0 0 0.91 601 760","#FFFFFF","center","LatoWebLight")])}download(t,e,a,i){return this.type=a,this.translation=i,super.download(t,e)}generateImage(t){if(this.context2d.canvas.width=t.width,this.context2d.canvas.height=t.height,"fcg"==this.type)return t.showcase.draw(t.brand,this.context2d,u.a.identityMatrix,(new s.a).textMap(t.brand,this.translation)).then(()=>t.imageData=this.context2d.canvas.toDataURL("image/"+t.format,1));if("bb"==this.type){this.initBBShowcases();let a=[],i=[this.BBFirstPage,this.BBLogoGuide,this.BBSafetyArea,this.BBLogoLayouts],o=this.getFontsShowcases(t);t.imagesData=[],i=i.concat(o),i.push(this.BBPalette),i.push(this.BBColorVariations),i.push(this.BBDesignElements1),i.push(this.BBDesignElements2),i.push(this.BBLogaster);var e=0;for(let n of i)a.push(this.drawBBShowcase(n,t,e)),e++;return Promise.all(a)}}drawBBShowcase(t,e,a=0){return t.draw(e.brand,this.context2d,u.a.identityMatrix,(new s.a).textMap(e.brand,this.translation)).then(()=>e.imagesData[a]=this.context2d.canvas.toDataURL("image/"+e.format,1))}getFileName(t){let e="";return"bb"==this.type?e="brandbook":"fcg"==this.type&&(e="fonts_colors_guidelines"),e+"_created_by_logaster"}static getShowcaseKey(t,e){return t+e}getFontsShowcases(t){let e=t.brand.fontFamilies(),a=[],i=[];for(let o=0;o<e.length;o++)a[o]=new r(e[o],o%2==0?"1 0 0 1 60 250":"1 0 0 1 560 250");for(let o=0;o<a.length;o++)if(o%2==0){let t=a[o],e=a[o+1],n=[],r=new c.a("bbcorporatefonts","3.36 0 0 3.36 60 130","#CCCCCC"),s=new l.a("brandbook/bb_background.png",m.a.BG_WHITE);n.push(s),n.push(r),n.push(t),null!=e&&n.push(e),i.push(new u.a(0,n))}return i}}},"RG/v":function(t,e,a){"use strict";a.d(e,"a",function(){return u});var i=a("gLuL"),o=a("SNl6"),n=a("0aEF"),r=a("4KeA"),s=a("8Bt/"),l=a("hKl1"),h=a("YDEh"),d=a("zjvR"),c=a("Eq80"),g=a("I/rG");let u=(()=>{class t extends r.a{getShowcases(){return[new s.a(0,[new o.a("brandbook/fcg_04.png")],"bb"),new s.a(0,[new o.a("social_media_kit/ipad_frame.png"),new o.a("brandbook/fcg_s_01.png",h.a.BG_WHITE),new o.a("brandbook/fcg_s_02.png",h.a.BG_WHITE,h.a.EL_LOGO1,"destination-over"),new o.a("brandbook/fcg_s_03.png",h.a.BG_WHITE,h.a.EL_LOGO2,"destination-over"),new d.a([new c.a(g.a.HORIZONTAL,140,70,"1 0 0 1 165 98",h.a.BG_B,!1)]),new n.a("typo","0.24 0 0 0.24 105 200","#747474"),new i.a("0.8 0 0 0.8 105 210",135,96,"#CCCCCC"),new n.a("colors","0.24 0 0 0.24 255 200","#747474"),new n.a("pcolor","0.2 0 0 0.2 280 228","#CCCCCC","center"),new n.a("scolor","0.2 0 0 0.2 342 228","#CCCCCC","center")],"bbs"),new s.a(0,[new l.a(null,h.a.BG_B,null,"multiply","repeat")],"texture"),new s.a(0,[new o.a("brandbook/fcg_1_content.png"),new o.a("brandbook/fcg_1_1st_element.png",h.a.BG_WHITE,h.a.EL_LOGO1,"destination-over"),new o.a("brandbook/fcg_1_2nd_element.png",h.a.BG_WHITE,h.a.EL_LOGO2,"destination-over"),new d.a([new c.a(g.a.HORIZONTAL,105,36,"0.7 0 0 0.7 49.5 34.5",h.a.BG_B,!1)])],"fcg_1"),new s.a(0,[new o.a("brandbook/fcgs_1_content.png"),new o.a("brandbook/fcgs_1_1st_element.png",h.a.BG_WHITE,h.a.EL_LOGO1,"destination-over"),new o.a("brandbook/fcgs_1_2nd_element.png",h.a.BG_WHITE,h.a.EL_LOGO2,"destination-over"),new d.a([new c.a(g.a.HORIZONTAL,140,70,"1 0 0 1 165 98",h.a.BG_B,!1)])],"fcgs_1"),new s.a(0,[new o.a("brandbook/bb_1_content.png"),new o.a("brandbook/bb_1_1st_element.png",h.a.BG_WHITE,h.a.EL_LOGO1,"destination-over"),new o.a("brandbook/bb_1_top_element.png",h.a.BG_B,h.a.EL_TEXT,"destination-over"),new d.a([new c.a(g.a.HORIZONTAL,82,33,"1 0 0 1 42 52",h.a.BG_B,!1)])],"bb_1"),new s.a(0,[new o.a("brandbook/bbs_1.png"),new d.a([new c.a(g.a.TEXT,44,19,"1 0 0 1 239 103",h.a.EL_LOGO1,!0),new c.a(g.a.TEXT,47,16,"1 0 0 1 337 107",h.a.EL_LOGO1,!1),new c.a(g.a.HORIZONTAL,60,24,"1 0 0 1 33 242",h.a.EL_LOGO1,!0),new c.a(g.a.HORIZONTAL,60,24,"1 0 0 1 134 242",h.a.EL_LOGO1,!1),new c.a(g.a.VERTICAL,32,39,"1 0 0 1 241 229",h.a.EL_LOGO1,!0),new c.a(g.a.VERTICAL,32,39,"1 0 0 1 339 229",h.a.EL_LOGO1,!1)])],"bbs_1")]}textMap(t,e=window.translation){var a=t.colorRange.getFill(h.a.BG_WHITE,h.a.EL_LOGO1),i=t.colorRange.getFill(h.a.BG_WHITE,h.a.EL_LOGO2),o=t.colorRange.getFill(h.a.BG_WHITE,h.a.EL_DESIGN1),n=t.colorRange.getFill(h.a.BG_WHITE,h.a.EL_DESIGN2);return{typo:e.Typography,colors:e.ColorPalette,bbcolors:e.BBColorPalette.toUpperCase(),pcolor:e.PrimaryColor,bbpcolor:e.BBPrimaryColor.toUpperCase(),scolor:e.SecondaryColor,bbscolor:e.BBSecondaryColor.toUpperCase(),bbfelement:e.BBFirstDesignElement.toUpperCase(),bbselement:e.BBSecondDesignElement.toUpperCase(),forweb:e.ForWeb,forprint:e.ForPrint,logoguide:e.BBLogoGuide.toUpperCase(),bylogaster:e.BBCreatedByLogaster,"www.logaster.com":e.BBLogastercom,yourlogoguide:e.BBYourLogoGuideline.toUpperCase(),logocolors1:e.BBLogoColors1,logocolors2:e.BBLogoColors2,logocolors3:e.BBLogoColors3,logocolors4:e.BBLogoColors4,logocolors5:e.BBLogoColors5,logolayouts:e.BBLogoLayouts.toUpperCase(),texttagline:e.BBTextTagline,text:e.BBTextNoTagline,horiztagline:e.BBHorizontalTagline,horiz:e.BBHorizontalNoTagline,verttagline:e.BBVerticalTagline,vert:e.BBVerticalNoTagline,logolayouts1:e.BBLogoLayouts1,logolayouts2:e.BBLogoLayouts2,logolayouts3:e.BBLogoLayouts3,logolayouts4:e.BBLogoLayouts4,logolayouts5:e.BBLogoLayouts5,logolayouts6:e.BBLogoLayouts6,logolayouts7:e.BBLogoLayouts7,bbcorporatefonts:e.BBCorporateFonts.toUpperCase(),bbbackgroundscolors:e.BBBackgroundsColors.toUpperCase(),bblogowhitebg:e.BBLogoWhiteBg,bblogowhitebgdescription:e.BBLogoWhiteBgDescription,bbblackwhite:e.BBBlackWhiteVersion,bbblackwhitedescription:e.BBBlackWhiteVersionDescription,bbcorporatebg:e.BBLogoCorporateBg,bblogocorporatebgdescription:e.BBLogoCorporateBgDescription,bbnegative:e.BBNegativeVersion,bbnegativedescription:e.BBNegativeVersionDescription,bbtransparentbg:e.BBLogoTransparentBg,bbtransparentbgdescription:e.BBLogoTransparentBgDescription,bbsafetyarea:e.BBSafetyArea.toUpperCase(),bbsafetyareadescription:e.BBSafetyAreaDescription,bbhorizontallogo:e.BBHorizontalLogo,bbhorizontallogowithtagline:e.BBHorizontalLogoWithTagline,bbsmallsizelogowithtagline:e.BBSmallSizeLogoWithTagline,bbsmallsizeLogowithouttagline:e.BBSmallSizeLogoWithoutTagline,bbverticallogo:e.BBVerticalLogo,bbverticallogowithtagline:e.BBVerticalLogoWithTagline,pchex:this.hexLabel(a,e),pcrgb:this.getRGB(a,e),schex:this.hexLabel(i,e),scrgb:this.getRGB(i,e),fsthex:this.hexLabel(o,e),fstrgb:this.getRGB(o,e),sndhex:this.hexLabel(n,e),sndrgb:this.getRGB(n,e),pccmyk:this.getCMYK(a,e),sccmyk:this.getCMYK(i,e),fstcmyk:this.getCMYK(o,e),sndcmyk:this.getCMYK(n,e)}}getR(t,e=window.translation){return e.RGBR.replace("{value}",""+((16711680&parseInt(t.color,16))>>16))}getG(t,e=window.translation){return e.RGBG.replace("{value}",""+((65280&parseInt(t.color,16))>>8))}getB(t,e=window.translation){return e.RGBB.replace("{value}",""+(255&parseInt(t.color,16)))}hexLabel(t,e=window.translation){return e.HEXValue.replace("{value}",t.color)}getRGB(t,e=window.translation){return e.RGB.replace("{R}",""+t.rgb.r).replace("{G}",""+t.rgb.g).replace("{B}",""+t.rgb.b)}getCMYK(t,e=window.translation){return e.CMYK.replace("{C}",""+t.cmyk.c).replace("{M}",""+t.cmyk.m).replace("{Y}",""+t.cmyk.y).replace("{K}",""+t.cmyk.k)}}return t.key="[BrandBook]",t})()},Y9WB:function(t,e,a){"use strict";a.d(e,"a",function(){return d});var i=a("ZL5I"),o=a("cbCs"),n=a("TNoi"),r=a("LeAA");class s extends r.a{}var l=a("04EX"),h=a("gwEI");class d extends o.a{constructor(t,e,a,o="1 0 0 1 0 0"){super(),this.socialType=l.b.NA,this.view=null,this.forceUseModel=!1,this.socialProduct=null,this.type=i.b.SocialProduct,"number"==typeof t?this.socialType=t:(this.socialProduct=t,this.forceUseModel=!0),this.width=e,this.height=a,this.matrixSrc=o}draw(t,e,a,i,o){this.initCachedProps(t,this.socialProduct,a),this.view.product=this.socialProduct,this.view.draw(),e.save(),this.matrix.setToContext2d(e),e.drawImage(this.view.context2d.canvas,0,0),e.restore()}initCachedProps(t,e,a){null===this.matrix&&(this.matrix=n.a.deserialize(this.matrixSrc),null!==a&&this.matrix.concat(a)),null===this.view?this.view=new s(h.a.forBrandProduct(this.width,this.height),e,1):this.view.context2d=h.a.forBrandProduct(this.width,this.height)}loadDynamic(t){return this.socialProduct=this.forceUseModel?this.socialProduct:t.getSocialProductBySizeType(this.socialType),this.initCachedProps(t,this.socialProduct,null),this.socialProduct.loadDynamic(t)}}},cbCs:function(t,e,a){"use strict";a.d(e,"a",function(){return d});var i=a("ZL5I"),o=a("TNoi"),n=a("WVmJ"),r=a("YDEh"),s=a("I/rG"),l=a("hrmL"),h=a("gwEI");let d=(()=>{class t extends i.a{constructor(){super(...arguments),this.matrix=null,this.view=null,this.tempContext2d=null,this.wmMatrix=null,this.wmImage=null,this.wmLogoOpacity=.8}draw(t,e,a,i,o){}initCachedProps(t,e,a){}initWatermarkData(t,e){this.withSlogan=this.view.product.getItem(l.a.LOGO).withSlogan,this.colorCombination=this.view.product.getItem(l.a.SVG).fill.getColorCombination(t.colorRange),this.tempContext2d=h.a.forTemp(e.canvas.width,e.canvas.height)}loadDynamic(e){var a=e.getLogo(this.type,this.withSlogan);if(a.status!==s.a.STATUS_S&&a.status!==s.a.STATUS_L&&a.status!==s.a.STATUS_SUBSCRIPTION_20&&a.status!==s.a.STATUS_SUBSCRIPTION_PACK_20){var i=this,o=this.getWatermarkUrl(e);if(!(null!==this.wmImage&&this.wmImage.width>0&&this.wmImage.height>0&&-1!==this.wmImage.src.indexOf(o)))return this.wmMatrix=null,void 0!==t.wmImagesPromises[o]?t.wmImagesPromises[o]:new Promise(function(t,a){i.wmImage=new Image,i.wmImage.crossOrigin="anonymous",i.wmImage.src=i.getWatermarkUrl(e),i.wmImage.onload=function(){t()},i.wmImage.onerror=function(){a()}})}}getWatermarkUrl(t){var e,a=this.type;return this.type>=s.a.START_INDEX&&(a=t.getLogo(this.type).makerType),this.width<=155?e=a===s.a.HORIZONTAL||a===s.a.TEXT?"watermarks/small_horizontal.png":"watermarks/small_square.png":this.width>150&&this.width<=340?e=a===s.a.HORIZONTAL||a===s.a.TEXT?"watermarks/medium_horizontal.png":"watermarks/medium_square.png":this.width>340&&this.width<=410?e="watermarks/large_horizontal.png":this.width>410&&(e="watermarks/extra_large_horizontal.png"),this.getFullUrl(e)}needWatermark(t,e=null){var a=t.getLogo(this.type,this.withSlogan,e);return!(this.type===s.a.HORIZONTAL&&!1===this.withSlogan&&this.colorCombination.bgColor===r.a.BG_WHITE&&this.colorCombination.elColor===r.a.EL_LOGO1||a.status===s.a.STATUS_S||a.status===s.a.STATUS_M||a.status===s.a.STATUS_L||a.status===s.a.STATUS_SUBSCRIPTION_20||a.status===s.a.STATUS_SUBSCRIPTION_PACK_20||a.status===s.a.STATUS_XS&&this.colorCombination.bgColor===r.a.BG_WHITE&&this.colorCombination.elColor===r.a.EL_LOGO1||a.status===s.a.STATUS_XS&&this.colorCombination.bgColor===r.a.BG_GRAY&&"747474"===this.colorCombination.elColor||this.width<=100)}drawWatermark(e,a,i){if(this.initWatermarkData(e,i),this.needWatermark(e,a)){var n=(this.wmImage.width-this.width)/2,r=(this.wmImage.height-this.height)/2;this.wmMatrix=new o.a,this.wmMatrix.translate(-n,-r),this.wmMatrix.concat(this.matrix);var s=this.colorCombination.getFill(null);null===s&&(s=t.wmDefaultFill),this.tempContext2d.save(),s.toContext2d(this.tempContext2d),this.tempContext2d.fillRect(0,0,this.tempContext2d.canvas.width,this.tempContext2d.canvas.height),this.wmMatrix.setToContext2d(this.tempContext2d),this.tempContext2d.globalCompositeOperation="destination-in",this.tempContext2d.drawImage(this.wmImage,0,0),this.tempContext2d.restore(),i.save(),i.globalAlpha=this.getBgWmOpacity(e),i.drawImage(this.tempContext2d.canvas,0,0),i.restore()}}getBgWmOpacity(e){var a=e.colorRange.getFill(this.colorCombination.bgColor),i=e.colorRange.getFill(this.colorCombination.bgColor,this.colorCombination.elColor);null===i&&(i=t.wmDefaultFill);var o=a.hex,n=i.hex,s=`${o};${n}`;if(void 0!==t.wmAlphaCache[s])return t.wmAlphaCache[s];var l=.7;for(let t=l;t<=.9;t+=.03){var h=r.a.blendColorsAlpha(o,n,t);if(l=t,r.a.contrast(o,h)>=1.1)break}return t.wmAlphaCache[s]=l,l}}return t.wmImagesPromises={},t.wmDefaultFill=new n.a("000000"),t.wmAlphaCache={},t})()},gLuL:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("8Jal"),o=a("TNoi"),n=a("ZL5I");class r extends n.a{constructor(t="1 0 0 1 0 0",e,a,i=null){super(),this.color=i,this.width=e,this.height=a,this.matrix=o.a.deserialize(t)}draw(t,e,a,n,r){e.save();var s=[];for(var l of t.logos)for(var h of l.textItems)-1==s.indexOf(h.font.fontFamily)&&s.push(h.font.fontFamily);var d,c=0,g=[];for(var u of s)c+=Math.round(24*1.2),(d=i.a.getBounds(u,24,u).clone()).y+=c,g.push(d);var m=i.a.getBoundsFromList(g),w=this.width/m.width,_=w;_*m.height>this.height&&(w=_=this.height/m.height);var p=Math.round((this.height-m.height*_)/2),b=new o.a;for(var u of(b.translate(-m.x,-m.y),b.scale(w,_),b.translate(0,p),null!==this.matrix&&b.concat(this.matrix),b.setToContext2d(e),e.fillStyle=this.color,c=0,s))c+=Math.round(24*1.2),e.font="24px "+u,e.fillText(u,0,c);e.restore()}}},hKl1:function(t,e,a){"use strict";a.d(e,"a",function(){return r});var i=a("SNl6"),o=a("UtAn");let n=(()=>{class t{constructor(t,e,a,i,o){var n=document.createElement("img");$(n).attr("crossOrigin","anonymous"),$(n).attr("src",e).one("load",function(){var e=t.createPattern(n,"repeat");t.fillStyle=e,t.fillRect(0,0,i,o),t.globalCompositeOperation="multiply",t.fillStyle="#"+a,t.fillRect(0,0,i,o)})}static getNextTextureIndex(){return null==this.textureIndex?(this.textureIndex=Math.floor(Math.random()*(this.textureCount-1))+1,this.textureIndex):(this.textureIndex++,this.textureIndex>this.textureCount&&(this.textureIndex=1),this.textureIndex)}static getRandomUrl(){return`${o.a.STATIC_ROOT_URL}/static/v3/texture/${t.padNumber(t.getNextTextureIndex(),2)}.png`}static padNumber(t,e){for(var a=t.toString();a.length<e;)a="0"+a;return a}}return t.textureIndex=null,t.textureCount=42,t})(),r=(()=>{class t extends i.a{constructor(t,e=null,a=null,i="multiply",o=null){super(t,e,a,i,o)}loadDynamic(e){const a=this;return a.imageUrl=t.getUrl(e.primaryLogo.number),new Promise(function(t,e){a.image=new Image,a.image.crossOrigin="anonymous",a.image.src=a.imageUrl,a.image.onload=function(){t()},a.image.onerror=function(){e()}})}static getTextureNumber(e){const a=e-1;return a<=t.totalTextures-1?a+1:a%t.totalTextures+1}static getRandomTextureNumber(){const e=Math.ceil(1),a=Math.floor(t.totalTextures);return Math.floor(Math.random()*(a-e+1))+e}static getUrl(e){const a=e?t.getTextureNumber(e):t.getRandomTextureNumber();return`${o.a.STATIC_ROOT_URL}/static/v3/texture/${n.padNumber(a,2)}.png`}static padNumber(t,e){let a=t.toString();for(;a.length<e;)a="0"+a;return a}}return t.totalTextures=41,t})()},kg9h:function(t,e,a){"use strict";a.d(e,"a",function(){return E});var i=a("zjVz"),o=a("I/rG"),n=a("ombG"),r=a("8Bt/"),s=a("jO/Y"),l=a("+9tV"),h=a("ZL5I"),d=a("SNl6"),c=a("TNoi"),g=a("hrmL"),u=a("+tZc"),m=a("8DbQ"),w=a("z4ei"),_=a("mrhZ"),p=a("NwTh"),b=a("2UJW"),f=a("kutf");let T=(()=>{class t{static getInstance(){return null===t._instance&&(t._instance=new t),t._instance}static getSvg(e,a,i=0){return t.getInstance().exportEx(e,a,i)}exportEx(e,a,i){var o,n,r=null,s=null,l=t.EMPTY_SVG_XML_TEMPLATE;l=this.replace(l,"{produceWidthMm}",(e.widthMm+i+i).toString()),l=this.replace(l,"{produceHeightMm}",(e.heightMm+i+i).toString()),o=b.parseXML(l),n=e.getItemsBySide(a);for(var h=null,d=0;d<o.childNodes.length;d++)if((h=o.childNodes[d]).nodeType==document.ELEMENT_NODE&&"svg"==h.nodeName.toLowerCase()){h.setAttribute("width",e.widthMm+i+i+"mm"),h.setAttribute("height",e.heightMm+i+i+"mm"),h.setAttribute("viewBox",`0 0 ${e.widthMm+i+i} ${e.heightMm+i+i}`),r=h;break}var c=document.createElementNS("http://www.w3.org/2000/svg","g");for(c.setAttribute("transform",`matrix(1, 0, 0, 1, ${i}, ${i})`),r.appendChild(c),c.appendChild(this.createBackgroundRect(e,i)),d=0;d<n.length;d++){var u=n[d];if(u.type==g.a.TEXT)c.appendChild(this.createTextNode(e,u));else if(u.type==g.a.SVG){var m=u;r=document.createElementNS("http://www.w3.org/2000/svg","g"),s=document.createElementNS("http://www.w3.org/2000/svg","g"),this.integrateSvg(c,r,b.parseXML(m.svg)),this.updateSvgFill(e,r,m.fill),this.measureSVG(m,s),s.appendChild(r),c.appendChild(s)}else if(u.type==g.a.LOGO){var _=u;_.logo.center();var p=w.a.getSvg(_.logo,null,_.fill.getColorCombination(_.logo.colorRange),!0,0,0,t.LOGO_PADDING),f=document.createElementNS("http://www.w3.org/2000/svg","g");s=document.createElementNS("http://www.w3.org/2000/svg","g"),this.integrateSvg(c,f,b.parseXML(p)),this.measureLogotype(_,f,s),c.appendChild(s)}}var T=(new XMLSerializer).serializeToString(o);return(T=T.replace(/ xml:space="preserve"/g,"")).replace(/<text/g,'<text xml:space="preserve"')}integrateSvg(t,e,a){var i=a.getElementsByTagName("metadata")[0];null!=i&&i.parentNode&&i.parentNode.removeChild(i);for(var o=null,n=null,r=0;r<t.childNodes.length;r++)if(null!=(n=t.childNodes[r]).nodeName&&"defs"==n.nodeName.toLowerCase()){o=n;break}null==o&&(o=document.createElementNS("http://www.w3.org/2000/svg","defs"),t.insertBefore(o,t.firstChild));var s=null,l=null;for(r=0;r<a.childNodes.length;r++)if((n=a.childNodes[r]).nodeType==document.ELEMENT_NODE&&"svg"==n.nodeName.toLowerCase()){s=n;break}for(r=0;r<s.childNodes.length;r++)if((n=s.childNodes[r]).nodeType==document.ELEMENT_NODE&&"defs"==n.nodeName.toLowerCase()){l=n;for(var h=0;h<l.childNodes.length;h++)o.appendChild(l.childNodes[h].cloneNode(!0))}else n.nodeType==document.ELEMENT_NODE&&e.appendChild(n.cloneNode(!0))}measureLogotype(t,e,a){var i=t.maths.matrix.clone(),o=new c.a,n=this.getLogotypeBounds(t.logo),r=t.bounds.width/n.width;r*n.height>t.bounds.height&&(r=t.bounds.height/n.height),o.scale(r,r),o.translate(-n.x*r,-n.y*r),o.translate(t.bounds.x+(t.bounds.width-n.width*r)/2,t.bounds.y+(t.bounds.height-n.height*r)/2),o.concat(i),a.setAttribute("transform",o.forSvg),a.appendChild(e)}measureSVG(t,e){var a=t.maths.matrix.clone(),i=t.bounds.x,o=t.bounds.y;a.scale(t.bounds.width/t.svgBounds.width,t.bounds.height/t.svgBounds.height),a.translate(i,o),e.setAttribute("transform",a.forSvg)}replace(t,e,a){if(e==a)return t;for(var i=t;i.indexOf(e)>=0;)i=i.replace(e,a);return i}createBackgroundRect(t,e=0){var a=document.createElementNS("http://www.w3.org/2000/svg","rect");return a.setAttribute("x",""+-e),a.setAttribute("y",""+-e),a.setAttribute("width",""+(t.widthMm+2*e)),a.setAttribute("height",""+(t.heightMm+2*e)),a.setAttribute("fill","#FFFFFF"),a}createTextNode(t,e){var a=document.createElementNS("http://www.w3.org/2000/svg","g"),i=document.createElementNS("http://www.w3.org/2000/svg","text"),o=e.maths.matrix.clone(),n=t.widthMm;switch(e.textAlign){case u.a.TEXT_ALIGN_LEFT:i.setAttribute("text-anchor","start");break;case u.a.TEXT_ALIGN_CENTER:i.setAttribute("text-anchor","middle"),o.translate(Math.round(n/2*100)/100,0);break;case u.a.TEXT_ALIGN_RIGHT:i.setAttribute("text-anchor","end"),o.translate(Math.round(100*n)/100,0)}i.setAttribute("transform",o.forSvg),i.setAttribute("fill",e.fill.getColorCombination(t.brand.colorRange).getFill(null).hex),i.setAttribute("font-family",""+e.font.fontFamily),i.setAttribute("font-size",this.getFontSize().toString()),e.fontWeight==u.a.FONT_WEIGHT_BOLD&&i.setAttribute("font-weight","bold"),e.fontStyle==u.a.FONT_STYLE_ITALIC&&i.setAttribute("font-style","italic"),e.textDecoration==u.a.TEXT_DECORATION_UNDERLINE&&i.setAttribute("text-decoration","underline"),a.appendChild(i);var r=e.content.split("\n"),s=!0;for(var l of r){var h=document.createElementNS("http://www.w3.org/2000/svg","tspan");h.setAttribute("x","0"),s||h.setAttribute("dy","1.2em"),s=!1,h.setAttribute("font-size",this.getFontSize().toString()),h.setAttribute("fill",e.fill.getColorCombination(t.brand.colorRange).getFill(null).hex);var d=l;null!=d&&""!=d||(d=" ");var c=document.createTextNode(d);h.appendChild(c),i.appendChild(h)}return a}getFontSize(){return Math.floor(100*m.a.TEXT_SIZE)/100}updateSvgFill(t,e,a){if(e.nodeType==document.ELEMENT_NODE&&"g"!=e.nodeName.toLowerCase())e.getAttribute("fill")&&e.setAttribute("fill",a.getColorCombination(t.brand.colorRange).getFill(null).hex);else if(e.nodeType==document.ELEMENT_NODE&&"g"==e.nodeName.toLowerCase())for(var i=0;i<e.childNodes.length;i++)this.updateSvgFill(t,e.childNodes[i],a)}getLogotypeBounds(t){var e=[];for(var a of t.items){if((a.isText||a.type==f.a.RICH_TEXT)&&""==a.text)continue;e.push(a.maths.matrix.transformPoint(a.bounds.topLeft)),e.push(a.maths.matrix.transformPoint(a.bounds.bottomRight));let t=new p.a(a.bounds.bottomRight.x,a.bounds.bottomRight.y-a.bounds.height),i=new p.a(a.bounds.topLeft.x,a.bounds.topLeft.y+a.bounds.height);e.push(a.maths.matrix.transformPoint(t)),e.push(a.maths.matrix.transformPoint(i))}var i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(let s of e)i=Math.min(i,s.x),o=Math.min(o,s.y),n=Math.max(n,s.x),r=Math.max(r,s.y);return new _.a(i,o,n-i,r-o)}}return t.SVG_MARGIN=2,t.LOGO_PADDING=.0581395348837,t.EMPTY_SVG_XML_TEMPLATE='<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 {produceWidthMm} {produceHeightMm}" width="{produceWidthMm}mm" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" height="{produceHeightMm}mm" xml:space="preserve"><defs></defs></svg>',t._instance=null,t})();var x=a("YDEh"),v=a("yt65");class E extends i.a{constructor(){super(...arguments),this.model="business_card",this.bcid=null,this.side=null,this.trimLine=0,this.printService=s.b.Default,this.businessCardFrontSide=new r.a(0,[new n.a(s.a.base300dpiSize.width,s.a.base300dpiSize.height,"1 0 0 1 0 0",s.a.FRONT_SIDE)]),this.businessCardBackSide=new r.a(0,[new n.a(s.a.base300dpiSize.width,s.a.base300dpiSize.height,"1 0 0 1 0 0",s.a.BACK_SIDE)]),this.downloadMap={png_bcf:{showcase:this.businessCardFrontSide,width:s.a.base300dpiSize.width,height:s.a.base300dpiSize.height,format:o.a.IMAGE_FORMAT_PNG},png_bcb:{showcase:this.businessCardBackSide,width:s.a.base300dpiSize.width,height:s.a.base300dpiSize.height,format:o.a.IMAGE_FORMAT_PNG},svg_bcf:{showcase:this.businessCardFrontSide,format:o.a.IMAGE_FORMAT_SVG},svg_bcb:{showcase:this.businessCardBackSide,format:o.a.IMAGE_FORMAT_SVG},pdf_bcf:{showcase:this.businessCardFrontSide,format:o.a.IMAGE_FORMAT_PDF},pdf_bcb:{showcase:this.businessCardBackSide,format:o.a.IMAGE_FORMAT_PDF}}}getFileName(t){var e="business_card_"+t.brand.getBusinessCardById(t.bcid).number;return e+=1===t.side?"_front":"_back",this.trimLine>0&&(e+="_trimline"),e+"_by_logaster"}static getShowcaseKey(t,e){return"{format}_{key}".replace("{format}",e).replace("{key}",t)}download(t,e,a,i,o){return this.bcid=a,this.side=i,this.printService=o,super.download(t,e,null,null,null,null,this.getLogoId(t.businessCards[0],i),!1,o)}generateImage(t){if(t.bcid||(t.bcid=this.bcid,t.side=this.side,t.printService=this.printService),b(this.context2d.canvas).attr("data-bcid",t.bcid),t.format===o.a.IMAGE_FORMAT_PDF||t.format===o.a.IMAGE_FORMAT_SVG){var e=this;return new Promise(this.printService!==s.b.Default?function(a){t.currentLogo.center(),t.imagesData=[];let i=t.brand.getBusinessCardById(t.bcid);t.imagesData.push(T.getSvg(i,s.a.FRONT_SIDE,e.trimLine)),t.imagesData.push(T.getSvg(i,s.a.BACK_SIDE,e.trimLine)),a()}:function(a){t.currentLogo.center();var i=t.brand.getBusinessCardById(t.bcid);t.imageData=T.getSvg(i,t.side,e.trimLine),a()})}return this.printService!==s.b.Default?this.generateImages(t):super.generateImage(t)}generateImages(t){let e=this.downloadMap.png_bcf.showcase,a=this.downloadMap.png_bcb.showcase;t.imagesData=[],this.context2d.canvas.width=t.width,this.context2d.canvas.height=t.height;var i=t.bgColor;return t.format===o.a.IMAGE_FORMAT_JPG&&i===x.a.BG_TRANSPARENT&&(i=x.a.BG_WHITE),e.update(i,t.elColor),a.update(i,t.elColor),new Promise((i,o)=>{this.drawBCShowcase(e,t,0).then(()=>{this.drawBCShowcase(a,t,1).then(()=>i())})})}drawBCShowcase(t,e,a=0){return t.draw(e.brand,this.context2d).then(()=>e.imagesData[a]=this.context2d.canvas.toDataURL("image/"+e.format,1))}getLogoId(t,e){for(var a=t.getItemsBySide(e),i=0;i<a.length;i++)if(a[i].type==g.a.LOGO)return a[i].logo.id}generateCustomShowcase(t,e=null,a=null,i="1 0 0 1 0 0"){var o=[new n.a(e=e||t.width,a=a||t.height,i,t.side)];return t.bgColor!==x.a.BG_TRANSPARENT&&o.unshift(new d.a(null,t.bgColor)),new r.a(0,o)}hasInvertedMask(t){var e=!1;for(var a of t.items)if(a.blendMode===l.a.INVERTED_MASK){e=!0;break}return e}submitForm(t){this.fData.append("bcid",t.bcid.toString()),super.submitForm(t)}setTrimLines(t){this.trimLine=t;var e=(s.a.baseSize.width+2*this.trimLine)/s.a.baseSize.width,a=(s.a.baseSize.height+2*this.trimLine)/s.a.baseSize.height;for(let i of this.businessCardFrontSide.layers)i.type===h.b.BusinessCard&&(i=i,i.trimLine=this.trimLine,i.width=s.a.base300dpiSize.width*e,i.height=s.a.base300dpiSize.height*a);for(let i of this.businessCardBackSide.layers)i.type===h.b.BusinessCard&&(i.trimLine=this.trimLine,i.width=s.a.base300dpiSize.width*e,i.height=s.a.base300dpiSize.height*a);this.updateDownloadMap()}updateDownloadMap(){var t=(s.a.baseSize.width+2*this.trimLine)/s.a.baseSize.width,e=(s.a.baseSize.height+2*this.trimLine)/s.a.baseSize.height;this.downloadMap.png_bcf.width=s.a.base300dpiSize.width*t,this.downloadMap.png_bcf.height=s.a.base300dpiSize.height*e,this.downloadMap.png_bcb.width=s.a.base300dpiSize.width*t,this.downloadMap.png_bcb.height=s.a.base300dpiSize.height*e}processResponse(t){this.printService===s.b.Default?super.processResponse(t):(v.a.isNG||b.cookie("imageDownloaded","1",{path:"/"}),window.open(t.url,"_blank")||window.top.location.replace(t.url))}}},lCRs:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var i=a("8Bt/"),o=a("zjVz"),n=a("Y9WB"),r=a("hrmL");class s extends o.a{constructor(){super(...arguments),this.model="social"}getSocialShowcase(t,e){return{showcase:new i.a(0,[new n.a(t,this.socialProduct.width,this.socialProduct.height)]),width:this.socialProduct.width,height:this.socialProduct.height,format:e}}getFileName(t){var e=t.fileName;return(e=e.replace(/-/gi,"_"))+"_on_corporate_by_logaster"}getSocialName(t){return t.fileName.replace(/_.*/gi,"")}download(t,e,a){return this.socialProduct=t.getSocialProductBySizeType(a),super.download(t,e,null,null,null,null,this.getLogoId(t.getSocialProductBySizeType(a)))}getLogoId(t){for(var e=t.items,a=0;a<e.length;a++)if(e[a].type==r.a.LOGO)return e[a].logo.id}getDownloadItem(t){return this.getSocialShowcase(this.socialProduct.sizeType,this.socialProduct.getDownloadFormat())}}},ombG:function(t,e,a){"use strict";a.d(e,"a",function(){return c});var i=a("ZL5I"),o=a("TNoi"),n=a("LeAA");class r extends n.a{}var s=a("jO/Y"),l=a("cbCs"),h=a("gwEI"),d=a("2UJW");class c extends l.a{constructor(t,e,a,o=s.a.FRONT_SIDE){super(),this.trimLine=0,this.view=null,this.businessCard=null,this.type=i.b.BusinessCard,this.width=t,this.height=e,this.matrixSrc=a,this.itemsGroup=o}draw(t,e,a,i,o){var n=d(e.canvas).data("bcid");0==n?this.businessCard=t.businessCards[t.businessCards.length-1]:""!==n&&(this.businessCard=t.getBusinessCardById(n)),this.initCachedProps(t,this.businessCard,a),this.view.product=this.businessCard,this.view.trimLine=this.trimLine,this.view.draw(),e.save(),this.matrix.setToContext2d(e),e.drawImage(this.view.context2d.canvas,0,0),e.restore()}initCachedProps(t,e,a){null===this.matrix&&(this.matrix=o.a.deserialize(this.matrixSrc),null!==a&&this.matrix.concat(a)),null===this.view||this.view.product.id!==e.id?this.view=new r(h.a.forBrandProduct(this.width,this.height),e,this.itemsGroup):this.view.context2d=h.a.forBrandProduct(this.width,this.height)}}},wUTM:function(t,e,a){"use strict";a.d(e,"b",function(){return h}),a.d(e,"a",function(){return d});var i=a("AytR"),o=a("vkgz"),n=a("+6eH"),r=a("fXoL"),s=a("tk/3"),l=a("D6qv"),h=function(t){return t.LETTERHEAD="letterhead",t.EMAIL_SIGNATURE="email_signature",t}({});let d=(()=>{class t{constructor(t,e){this.http=t,this.accountService=e,this.isEditMode=!1,this.brandManager=new n.a,this.compareCb=(t,e)=>t.number>e.number?1:t.number<e.number?-1:0}isProductPreSaved(){return!!this.preSavedProduct&&!!this.currentProductKey}preSaveProduct(t,e,a=!1,i){this.isEditMode=a,this.preSavedProduct=t,this.currentProductKey=e,this.logoIndex=i}extendPreSavedProduct(t){this.preSavedProduct.fields=t}updateProduct(t,e){switch(e){case h.EMAIL_SIGNATURE:return this.http.patch(""+i.a.saveEmailSignatureURI,t,{observe:"response"}).pipe(Object(o.a)(t=>{this.pathProduct(t,e)})).toPromise();case h.LETTERHEAD:return this.http.patch(""+i.a.saveLetterheadURI,t,{observe:"response"}).pipe(Object(o.a)(t=>{this.pathProduct(t,e)})).toPromise();default:throw new Error("Unreachable statement")}}saveProduct(t,e){switch(t=null!=t?t:this.preSavedProduct,e=null!=e?e:this.currentProductKey){case h.EMAIL_SIGNATURE:return this.http.post(""+i.a.saveEmailSignatureURI,t,{observe:"response"}).pipe(Object(o.a)(t=>{this.storeProduct(t,e)})).toPromise();case h.LETTERHEAD:return this.http.post(""+i.a.saveLetterheadURI,t,{observe:"response"}).pipe(Object(o.a)(t=>{this.storeProduct(t,e)})).toPromise();default:throw new Error("Unreachable statement")}}getProducts(t,e){var a,i,o,n;switch(e){case h.EMAIL_SIGNATURE:return null!==(i=null===(a=this.accountService.accountSrc)||void 0===a?void 0:a.emailSignatures.sort(this.compareCb))&&void 0!==i?i:[];case h.LETTERHEAD:return null!==(n=null===(o=this.accountService.accountSrc)||void 0===o?void 0:o.letterheads.sort(this.compareCb))&&void 0!==n?n:[];default:throw new Error("Unreachable statement")}}storeProduct(t,e){201===t.status&&(this.accountService.updateAccountSource(t.body,e),this.brandManager.deleteBrandFromStorage(t.body.brandId),this.clearState())}pathProduct(t,e){this.storeProduct(t,e)}clearState(){this.logoIndex=null,this.isEditMode=null,this.preSavedProduct=null,this.currentProductKey=null}}return t.\u0275fac=function(e){return new(e||t)(r.Vb(s.a),r.Vb(l.a))},t.\u0275prov=r.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},xYkl:function(t,e,a){"use strict";a.d(e,"a",function(){return d});var i=a("vhon"),o=a("Pa5M"),n=a("zjVz"),r=a("I/rG"),s=a("8Bt/"),l=a("YDEh"),h=a("Eq80");class d extends n.a{constructor(){super(...arguments),this.model="favicon",this.favicon16x16=new s.a(0,[new i.a("brand_logos/transparent_tile.png",l.a.BG_A,l.a.EL_LOGO1,"destination-over","repeat"),new o.a([new h.a(r.a.ICON,12,12,"1 0 0 1 2 2",l.a.BG_B)])]),this.favicon32x32=new s.a(0,[new i.a("brand_logos/transparent_tile.png",l.a.BG_A,l.a.EL_LOGO1,"destination-over","repeat"),new o.a([new h.a(r.a.ICON,24,24,"1 0 0 1 4 4",l.a.BG_B)])]),this.favicon96x96=new s.a(0,[new i.a("brand_logos/transparent_tile.png",l.a.BG_A,l.a.EL_LOGO1,"destination-over","repeat"),new o.a([new h.a(r.a.ICON,72,72,"1 0 0 1 12 12",l.a.BG_B)])]),this.favicon192x192=new s.a(0,[new i.a("brand_logos/transparent_tile.png",l.a.BG_A,l.a.EL_LOGO1,"destination-over","repeat"),new o.a([new h.a(r.a.ICON,144,144,"1 0 0 1 24 24",l.a.BG_B)])]),this.downloadMap={ico:{showcase:this.favicon192x192,format:r.a.IMAGE_FORMAT_ICO,width:192,height:192},png16x16:{showcase:this.favicon16x16,format:r.a.IMAGE_FORMAT_PNG,width:16,height:16},png32x32:{showcase:this.favicon32x32,format:r.a.IMAGE_FORMAT_PNG,width:32,height:32},png96x96:{showcase:this.favicon96x96,format:r.a.IMAGE_FORMAT_PNG,width:96,height:96},png192x192:{showcase:this.favicon192x192,format:r.a.IMAGE_FORMAT_PNG,width:192,height:192}}}download(t,e){return super.download(t,e,l.a.BG_WHITE,l.a.EL_LOGO1,null,null,t.getIconLogo().id)}getFileName(t){return t.format==r.a.IMAGE_FORMAT_ICO?"favicon_created_by_logaster":`favicon_${t.width}x${t.height}_created_by_logaster`}static getShowcaseKey(t,e,a=""){return e+a}}},ycfb:function(t,e,a){"use strict";a.d(e,"a",function(){return f});var i=a("vhon"),o=a("Eq80"),n=a("8Bt/"),r=a("+9tV"),s=a("YDEh"),l=a("I/rG"),h=a("zjVz"),d=a("z4ei"),c=a("SNl6"),g=a("Pa5M"),u=a("Bhu5"),m=a("8cr0"),w=a("2UJW"),_=a("TNoi"),p=a("q6zK");class b extends p.a{constructor(t){super(t);for(let e of this.items)e.noWatermark=!0}loadDynamic(t){return new Promise((t,e)=>{t()})}}let f=(()=>{class t extends h.a{constructor(){super(...arguments),this.model="logo",this.free=new n.a(0,[new c.a(null,s.a.BG_WHITE),new b([new o.a(l.a.HORIZONTAL,l.a.FREE_LOGO_WIDTH,l.a.FREE_LOGO_HEIGHT,"1 0 0 1 24 26",s.a.BG_WHITE,!1)])]),this.downloadMap={free:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.free,width:330,height:150},png_horizontal_with_slogan:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.horizontalWithSlogan(0),width:2e3,height:917},png_horizontal_without_slogan:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.horizontalWithoutSlogan(0),width:2e3,height:899},png_vertical_with_slogan:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.verticalWithSlogan(0),width:1759,height:2e3},png_vertical_without_slogan:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.verticalWithoutSlogan(0),width:2e3,height:2e3},png_text_with_slogan:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.textWithSlogan(0),width:2e3,height:1435},png_text_without_slogan:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.textWithoutSlogan(0),width:2e3,height:1175},jpeg_horizontal_with_slogan:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.horizontalWithSlogan(0),width:2e3,height:917},jpeg_horizontal_without_slogan:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.horizontalWithoutSlogan(0),width:2e3,height:899},jpeg_vertical_with_slogan:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.verticalWithSlogan(0),width:1759,height:2e3},jpeg_vertical_without_slogan:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.verticalWithoutSlogan(0),width:2e3,height:2e3},jpeg_text_with_slogan:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.textWithSlogan(0),width:2e3,height:1435},jpeg_text_without_slogan:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.textWithoutSlogan(0),width:2e3,height:1175},free_padding:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.free,width:330,height:150},png_horizontal_with_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.horizontalWithSlogan(this.calculatePaddingValue(2e3,917)),width:2e3,height:917},png_horizontal_without_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.horizontalWithoutSlogan(this.calculatePaddingValue(2e3,899)),width:2e3,height:899},png_vertical_with_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.verticalWithSlogan(this.calculatePaddingValue(1759,2e3)),width:1759,height:2e3},png_vertical_without_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.verticalWithoutSlogan(this.calculatePaddingValue(2e3,2e3)),width:2e3,height:2e3},png_text_with_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.textWithSlogan(this.calculatePaddingValue(2e3,1435)),width:2e3,height:1435},png_text_without_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG,showcase:this.textWithoutSlogan(this.calculatePaddingValue(2e3,1175)),width:2e3,height:1175},jpeg_horizontal_with_slogan_padding:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.horizontalWithSlogan(this.calculatePaddingValue(2e3,917)),width:2e3,height:917},jpeg_horizontal_without_slogan_padding:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.horizontalWithoutSlogan(this.calculatePaddingValue(2e3,899)),width:2e3,height:899},jpeg_vertical_with_slogan_padding:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.verticalWithSlogan(this.calculatePaddingValue(1759,2e3)),width:1759,height:2e3},jpeg_vertical_without_slogan_padding:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.verticalWithoutSlogan(this.calculatePaddingValue(2e3,2e3)),width:2e3,height:2e3},jpeg_text_with_slogan_padding:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.textWithSlogan(this.calculatePaddingValue(2e3,1435)),width:2e3,height:1435},jpeg_text_without_slogan_padding:{format:l.a.IMAGE_FORMAT_JPG,showcase:this.textWithoutSlogan(this.calculatePaddingValue(2e3,1175)),width:2e3,height:1175},custom_horizontal_with_slogan:{format:l.a.IMAGE_FORMAT_PNG},custom_horizontal_without_slogan:{format:l.a.IMAGE_FORMAT_PNG},custom_vertical_with_slogan:{format:l.a.IMAGE_FORMAT_PNG},custom_vertical_without_slogan:{format:l.a.IMAGE_FORMAT_PNG},custom_text_with_slogan:{format:l.a.IMAGE_FORMAT_PNG},custom_text_without_slogan:{format:l.a.IMAGE_FORMAT_PNG},pdf_horizontal_with_slogan:{format:l.a.IMAGE_FORMAT_PDF},pdf_horizontal_without_slogan:{format:l.a.IMAGE_FORMAT_PDF},pdf_vertical_with_slogan:{format:l.a.IMAGE_FORMAT_PDF},pdf_vertical_without_slogan:{format:l.a.IMAGE_FORMAT_PDF},pdf_text_with_slogan:{format:l.a.IMAGE_FORMAT_PDF},pdf_text_without_slogan:{format:l.a.IMAGE_FORMAT_PDF},svg_horizontal_with_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_horizontal_without_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_vertical_with_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_vertical_without_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_text_with_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_text_without_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_horizontal_with_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_horizontal_without_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_vertical_with_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_vertical_without_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_text_with_slogan:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_text_without_slogan:{format:l.a.IMAGE_FORMAT_SVG},custom_horizontal_with_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG},custom_horizontal_without_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG},custom_vertical_with_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG},custom_vertical_without_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG},custom_text_with_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG},custom_text_without_slogan_padding:{format:l.a.IMAGE_FORMAT_PNG},pdf_horizontal_with_slogan_padding:{format:l.a.IMAGE_FORMAT_PDF},pdf_horizontal_without_slogan_padding:{format:l.a.IMAGE_FORMAT_PDF},pdf_vertical_with_slogan_padding:{format:l.a.IMAGE_FORMAT_PDF},pdf_vertical_without_slogan_padding:{format:l.a.IMAGE_FORMAT_PDF},pdf_text_with_slogan_padding:{format:l.a.IMAGE_FORMAT_PDF},pdf_text_without_slogan_padding:{format:l.a.IMAGE_FORMAT_PDF},svg_horizontal_with_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_horizontal_without_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_vertical_with_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_vertical_without_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_text_with_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_text_without_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_horizontal_with_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_horizontal_without_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_vertical_with_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_vertical_without_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_text_with_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG},svg_curves_text_without_slogan_padding:{format:l.a.IMAGE_FORMAT_SVG}}}calculatePaddingValue(e,a){return e<a?e*t.PADDING_VALUE_RATIO:a*t.PADDING_VALUE_RATIO}calculateMatrixForPadding(t,e="1 0 0 1 0 0"){let a=_.a.deserialize(e);return a.translate(t,t),a.serialize()}horizontalWithSlogan(t=0){return new n.a(0,[new i.a(null,s.a.BG_WHITE),new b([new o.a(l.a.HORIZONTAL,2e3-2*t,917-2*t,this.calculateMatrixForPadding(t),s.a.BG_WHITE,!0)])])}horizontalWithoutSlogan(t=0){return new n.a(0,[new i.a(null,s.a.BG_WHITE),new b([new o.a(l.a.HORIZONTAL,2e3-2*t,899-2*t,this.calculateMatrixForPadding(t),s.a.BG_WHITE,!1)])])}verticalWithSlogan(t=0){return new n.a(0,[new i.a(null,s.a.BG_WHITE),new b([new o.a(l.a.VERTICAL,1759-2*t,2e3-2*t,this.calculateMatrixForPadding(t),s.a.BG_WHITE,!0)])])}verticalWithoutSlogan(t=0){return new n.a(0,[new i.a(null,s.a.BG_WHITE),new b([new o.a(l.a.VERTICAL,2e3-2*t,2e3-2*t,this.calculateMatrixForPadding(t),s.a.BG_WHITE,!1)])])}textWithSlogan(t=0){return new n.a(0,[new i.a(null,s.a.BG_WHITE),new b([new o.a(l.a.TEXT,2e3-2*t,1435-2*t,this.calculateMatrixForPadding(t),s.a.BG_WHITE,!0)])])}textWithoutSlogan(t=0){return new n.a(0,[new i.a(null,s.a.BG_WHITE),new b([new o.a(l.a.TEXT,2e3-2*t,1175-2*t,this.calculateMatrixForPadding(t),s.a.BG_WHITE,!1)])])}generateImage(e){return e.format===l.a.IMAGE_FORMAT_PDF||e.format===l.a.IMAGE_FORMAT_SVG?new Promise(function(a,i){e.currentLogo.center();var o=e.bgColor!==s.a.BG_TRANSPARENT?e.brand.colorRange.getFill(e.bgColor):null;let n=e.padding?t.PADDING_VALUE_RATIO:0;e.imageData=d.a.getSvg(e.currentLogo,o,m.a.getCombination(e.brand.colorRange,e.bgColor,e.elColor),!1,0,0,n),a(e.imageData)}):(e.customSize&&(e.showcase=this.generateCustomShowcase(e)),w(this.context2d.canvas).data("lid",e.currentLogo.id),super.generateImage(e))}generateCustomShowcase(t,e=null,a=null,i="1 0 0 1 0 0"){let r=i,l=e=e||t.width,h=a=a||t.height;if(t.padding){let t=this.calculatePaddingValue(e,a);r=this.calculateMatrixForPadding(t,i),l-=2*t,h-=2*t}let d=[new g.a([new o.a(t.currentLogo.makerType,l,h,r,t.bgColor,t.currentLogo.makerSlogans>0,t.elColor)])];return t.bgColor!==s.a.BG_TRANSPARENT&&d.unshift(new c.a(null,t.bgColor)),new n.a(0,d)}hasInvertedMask(t){var e=!1;for(var a of t.items)if(a.blendMode===r.a.INVERTED_MASK){e=!0;break}return e}getColorVariation(t){var e="";return t.bgColor===s.a.BG_TRANSPARENT?e="Logo on transparent background":t.bgColor===s.a.BG_WHITE?(e="Logo on white background","000000"===t.elColor&&(e="Black & white version")):t.bgColor===s.a.BG_B?e="Logo on corporate color background":t.bgColor===s.a.BG_BLACK&&(e="Negative version"),e}getFileName(t){var e="";return t.currentLogo.makerType===u.a.Horizontal?e+="horizontal":t.currentLogo.makerType===u.a.Vertical?e+="vertical":t.currentLogo.makerType===u.a.Text&&(e+="smallsize"),t.currentLogo.makerSlogans>0&&(e+="_tagline"),"000000"===t.elColor&&(e+="_black"),e+="_on",t.bgColor===s.a.BG_TRANSPARENT?e+="_transparent":t.bgColor===s.a.BG_WHITE?e+="_white":t.bgColor===s.a.BG_B?e+="_corporate":t.bgColor===s.a.BG_BLACK&&(e+="_negative"),t.format===l.a.IMAGE_FORMAT_SVG&&(e+=t.curves?"_curves":"_fonts"),t.customSize&&(e+=`_${t.width}x${t.height}px`),e+"_by_logaster"}static getShowcaseKey(t,e,a=!0){var i=e;return"free"===i||(t.maker.type===u.a.Vertical?i+="_vertical":t.maker.type===u.a.Horizontal?i+="_horizontal":t.maker.type===u.a.Text&&(i+="_text"),i+=null!==t.maker.slogans&&t.maker.slogans.length>0?"_with_slogan":"_without_slogan",a&&(i+="_padding")),i}}return t.PADDING_VALUE_RATIO=.1,t})()},z4ei:function(t,e,a){"use strict";a.d(e,"a",function(){return g});var i=a("I/rG"),o=a("WVmJ"),n=a("kutf"),r=a("g/co"),s=a("TNoi"),l=a("Go6F"),h=a("+9tV"),d=a("Imjg"),c=a("2UJW");let g=(()=>{class t{static getSvg(e,a,r,l=!1,d=0,c=0,g=0){let u=e.clone();var m=document.createElementNS("http://www.w3.org/2000/svg","svg"),w=document.createElementNS("http://www.w3.org/2000/svg","g"),_=document.createElementNS("http://www.w3.org/2000/svg","g"),p=document.createElementNS("http://www.w3.org/2000/svg","defs"),b=1,f=d,T=c;0===f||0===T?(b=(l?i.a.LOGO_SUGGESTION_WIDTH:4e3)/i.a.LOGO_SUGGESTION_WIDTH,f=Math.round(i.a.LOGO_SUGGESTION_WIDTH*b),T=Math.round(i.a.LOGO_SUGGESTION_HEIGHT*b),u.center(0)):(b=d/i.a.LOGO_SUGGESTION_WIDTH,u.center(0,i.a.LOGO_SUGGESTION_WIDTH,i.a.LOGO_SUGGESTION_WIDTH/(d/c))),m.setAttribute("version","1.1"),m.setAttribute("id","Logotype"),m.setAttribute("x","0px"),m.setAttribute("y","0px"),m.setAttribute("width",f+"px"),m.setAttribute("height",T+"px"),m.setAttribute("viewBox",`0 0 ${f} ${T}`),null===a||l||t.initializeLogotypeBackground(m,f,T,a.hex);var x=s.a.deserialize(`${b}, 0, 0, ${b}, 0, 0`);if(0!=g){let t=f*g,e=(f-2*t)/f;x.scale(e,e),x.translate(t,t)}w.setAttribute("transform",x.toStringCSS()),m.appendChild(p),m.appendChild(w),w.appendChild(_);var v=null,E=null,I=0;for(let s of u.items){var S=r.getFill(s.fill);if(s.blendMode===h.a.INVERTED_MASK&&(S=new o.a("000000")),s.blendMode===h.a.INVERTED_MASK&&null===v&&(v=t.initInvertedMaskNode(_,p)),s.isText||s.type==n.a.RICH_TEXT?(I++,E=t.createTextXml(p,s.text,s.font,S,i.a.LOGO_TEXT_SIZE,s.maths,"text"+I.toString())):s.type==n.a.SVG_ICON||s.type==n.a.TEXT_ICON?E=t.createEmblemXml(s,S,p):s.type==n.a.LINE&&(E=t.createLineXml(s,S,p)),null!==E)switch(s.blendMode){case h.a.INVERTED_MASK:v.appendChild(E);break;case h.a.DEFAULT:default:_.appendChild(E)}}var L='<?xml version="1.0" encoding="utf-8"?>\r\n'+t.SVG_DOCKTYPE+"\r\n";return-1==(L+=(new XMLSerializer).serializeToString(m)).indexOf('xmlns="http://www.w3.org/2000/svg"')&&(L=L.replace("<svg",'<svg xmlns="http://www.w3.org/2000/svg"')),-1==L.indexOf('xmlns:xlink="http://www.w3.org/1999/xlink"')&&(L=L.replace("<svg",'<svg xmlns:xlink="http://www.w3.org/1999/xlink"')),L.replace(/<text/g,'<text xml:space="preserve"')}static initInvertedMaskNode(t,e){var a=document.createElementNS("http://www.w3.org/2000/svg","mask"),i=document.createElementNS("http://www.w3.org/2000/svg","rect");return i.setAttributeNS(null,"fill","#ffffff"),i.setAttributeNS(null,"width","500%"),i.setAttributeNS(null,"height","500%"),i.setAttributeNS(null,"id","mask_background"),a.setAttributeNS(null,"id","inverted-mask"),a.appendChild(i),t.setAttributeNS(null,"mask","url('#inverted-mask')"),e.appendChild(a),a}static createLineXml(e,a,i){var n=document.createElementNS("http://www.w3.org/2000/svg","g"),s=document.createElementNS("http://www.w3.org/2000/svg","rect");return s.setAttribute("transform",e.maths.matrix.forSvg),e.maths.p1.x==e.maths.p2.x?(s.setAttributeNS(null,"x",Math.round(Math.min(e.maths.p1.x,e.maths.p2.x)-e.maths.lineWidth/2).toString()),s.setAttributeNS(null,"y",Math.round(Math.min(e.maths.p1.y,e.maths.p2.y)).toString()),s.setAttributeNS(null,"width",Math.round(e.maths.lineWidth).toString()),s.setAttributeNS(null,"height",Math.round(Math.max(e.maths.p1.y,e.maths.p2.y)-Math.min(e.maths.p1.y,e.maths.p2.y)).toString())):(s.setAttributeNS(null,"x",Math.round(Math.min(e.maths.p1.x,e.maths.p2.x)).toString()),s.setAttributeNS(null,"y",Math.round(Math.min(e.maths.p1.y,e.maths.p2.y)-e.maths.lineWidth/2).toString()),s.setAttributeNS(null,"width",Math.round(Math.max(e.maths.p1.x,e.maths.p2.x)-Math.min(e.maths.p1.x,e.maths.p2.x)).toString()),s.setAttributeNS(null,"height",Math.round(e.maths.lineWidth).toString())),a instanceof r.a?(i.appendChild(t.createGradientXml("lineFill",a)),s.setAttributeNS(null,"fill","url(#lineFill)")):a instanceof o.a&&s.setAttributeNS(null,"fill",a.hex),n.appendChild(s),n}static createTextXml(e,a,i,n,s,l,h,d=!1){var c=a.trim();if(null==c||""==c)return null;var g=document.createElementNS("http://www.w3.org/2000/svg","g"),u=document.createElementNS("http://www.w3.org/2000/svg","text"),m=document.createTextNode(a),w=null;return u.appendChild(m),u.setAttribute("font-family",""+i.fontFamily),u.setAttribute("font-size",s.toString()),g.setAttribute("transform",t.getTextTransform(l)),u.setAttribute("x","0"),u.setAttribute("y","0"),u.setAttribute("letter-spacing",i.fUnitsToPx(l.kerning)+"px"),n instanceof r.a&&d&&(n=new o.a(n.color)),n instanceof o.a?u.setAttribute("fill",n.hex):n instanceof r.a&&(e.appendChild(t.createGradientXml(w=h+"Fill",n)),u.setAttribute("fill",`url(#${w})`)),g.appendChild(u),g}static createEmblemXml(e,a,i){e.type==n.a.TEXT_ICON&&t.generateTextEmblemSvg(e);let o=document.createElementNS("http://www.w3.org/2000/svg","g");t.populateEmblemWithComponents(e,a,o,i);let r=c.parseXML(e.svg),{x:l,y:h}=r.querySelector("svg").viewBox.baseVal,d=e.maths.matrix;return 0===l&&0===h||(d=new s.a,d.translate(-l,-h),d.concat(e.maths.matrix)),o.setAttribute("transform",d.forSvg),o}static getTextTransform(t){l.a.calculateTransformationFactors(t.matrix);var e=new s.a;return e.concat(t.matrix),e.forSvg}static initializeLogotypeBackground(t,e,a,i){var o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x","0"),o.setAttribute("y","0"),o.setAttribute("width",e.toString()),o.setAttribute("height",a.toString()),o.setAttribute("fill",i),o.setAttribute("id","background"),t.appendChild(o)}static populateEmblemWithComponents(t,e,a,i){for(var o=d.a.changeEmblemAppearance(t.svg,e),n=c.parseXML(o),r=[],s=null,l=null,h=null,g=null,u=0;u<n.childNodes.length;u++)if((l=n.childNodes[u]).nodeType==document.ELEMENT_NODE&&"svg"==l.nodeName.toLowerCase())for(var m=0;m<l.childNodes.length;m++)(h=l.childNodes[m]).nodeType==document.ELEMENT_NODE&&"defs"!=h.nodeName.toLowerCase()?r.push(h):h.nodeType==document.ELEMENT_NODE&&"defs"==h.nodeName.toLowerCase()&&(s=h);for(u=0;u<r.length;u++)g=(l=r[u]).cloneNode(!0),a.appendChild(g);if(s)for(u=0;u<s.childNodes.length;u++)(l=s.childNodes[u]).nodeType==document.ELEMENT_NODE&&(g=l.cloneNode(!0),i.appendChild(g))}static encodeXml(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}static generateTextEmblemSvg(e){var a=t.getTextEmblemShapeSvg(e);e.svg=t.XML_HEAD+""+t.SVG_DOCKTYPE+`<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" version="1.1" x="0px" y="0px" width="100px" height="100px" viewBox="0 0 100 100">${a}</svg>`}static getTextEmblemShapeSvg(e){var a="<g>";return a+=50==e.cornerRadius?'<g><circle cx="50" cy="50" r="50" /></g>':`<g><rect x="0" y="0" width="100" height="100" rx="${e.cornerRadius}" ry="${e.cornerRadius}" /></g>`,(a+='<g transform="'+e.maths.matrix.forSvg+`)"><text font-family="'${e.font.fontFamily}'" font-size="${i.a.LOGO_TEXT_SIZE}" x="0" y="${i.a.LOGO_TEXT_SIZE}" fill="#FFFFFF">${t.encodeXml(e.text)}</text></g>`)+"</g>"}static changeEmblemAppearance(t,e,a=null){if(null==t||""==t||!e)return t;for(var i=c.parseXML(t),o=null,n=null,r=!1,s=0;s<i.childNodes.length;s++){var l=i.childNodes[s];if(l.nodeType==document.ELEMENT_NODE&&"svg"==l.nodeName.toLowerCase()){var h;o=l;for(var d=0;d<l.childNodes.length;d++)if((h=l.childNodes[d]).nodeType==document.ELEMENT_NODE&&"defs"==h.nodeName.toLowerCase()){n=h,r=!0;break}null===n&&(n=document.createElementNS("http://www.w3.org/2000/svg","defs"))}}return o&&(0==n.childNodes.length&&r?n.remove():n.childNodes.length>0&&!r&&o.insertBefore(n,o.firstChild)),(new XMLSerializer).serializeToString(i)}static createGradientXml(t,e){var a=null;if(null==e)return a;(a=e instanceof r.a?document.createElementNS("http://www.w3.org/2000/svg","linearGradient"):document.createElementNS("http://www.w3.org/2000/svg","radialGradient")).setAttribute("id",t),a.setAttribute("gradientUnits","objectBoundingBox"),a.setAttribute("gradientTransform",`rotate(${e.angle})`);for(let o of e.entries){var i=document.createElementNS("http://www.w3.org/2000/svg","stop");i.setAttribute("offset",o.ratio.toString()),i.setAttribute("stop-color",o.colorHex),a.appendChild(i)}return a}}return t.XML_HEAD="<?xml version='1.0' encoding='UTF-8'?>",t.SVG_DOCKTYPE='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">',t})()},zjVz:function(t,e,a){"use strict";a.d(e,"a",function(){return d});var i=a("YDEh"),o=a("UtAn"),n=a("I/rG"),r=a("jO/Y"),s=a("2UJW"),l=a("yt65"),h=a("tYOQ");class d{constructor(){this.downloadMap=null,this.model=null,this.context2d=document.createElement("canvas").getContext("2d")}static get CAN_DOWNLOAD_URL(){return o.a.MAIN_URL+"/v3/js/can-download/{id}/"}static get DOWNLOAD_URL(){return o.a.MAIN_URL+"/v3/js/download/{id}/"}get isDownloadReady(){return d.downloadReady}download(t,e,a=i.a.BG_WHITE,o=i.a.EL_LOGO1,n=null,s=null,l=null,h=!1,c=r.b.Default){d.downloadReady=new Promise(t=>{d.downloadReadyResolver=t}),this.fData=new FormData;let g=this.getDownloadItem(e);if(null===g)return new Promise(function(t,e){e()});let u={brand:t,currentLogo:t.getLogoById(l||t.id),showcase:g.showcase,fileName:e,format:g.format,width:n||g.width,height:s||g.height,bgColor:a,elColor:o,customSize:null!==n||null!==s,curves:h,padding:e.indexOf("_padding")>0,printService:c};return this.validate(u).then(()=>this.generateImage(u)).then(()=>this.submitForm(u)).then(()=>u.imageData)}validate(t){return new Promise((function(e,a){var o={model:this.model,format:t.format,width:t.width,height:t.height,customSize:t.customSize,colorKey:i.a.getColorKey(t.elColor,t.bgColor),userProfile:h.a.serialize(),printService:t.printService};s.ajax({type:"POST",url:d.CAN_DOWNLOAD_URL.replace("{id}",t.currentLogo.id.toString()),data:JSON.stringify(o),contentType:"application/json",dataType:"json",success:function(t){!1!==t?e():a()}})}).bind(this))}generateImage(t){this.context2d.canvas.width=t.width,this.context2d.canvas.height=t.height;var e=t.bgColor;return t.format===n.a.IMAGE_FORMAT_JPG&&e===i.a.BG_TRANSPARENT&&(e=i.a.BG_WHITE),t.showcase.update(e,t.elColor),t.showcase.draw(t.brand,this.context2d).then(()=>t.imageData=this.context2d.canvas.toDataURL("image/"+t.format,1))}submitForm(t){var e=this,a=this.getFileName(t);this.fData.append("model",this.model),this.fData.append("format",t.format),this.fData.append("name",a),this.fData.append("colorKey",i.a.getColorKey(t.elColor,t.bgColor)),this.fData.append("printService",t.printService.toString()),t.imageData?this.fData.append("imageData",t.imageData):this.fData.append("imagesData",JSON.stringify(t.imagesData)),t.width&&this.fData.append("width",t.width.toString()),t.height&&this.fData.append("height",t.height.toString()),t.customSize&&this.fData.append("customSize","1"),this.fData.append("curves",t.curves?"1":"0");var o=new XMLHttpRequest;o.open("POST",d.DOWNLOAD_URL.replace("{id}",t.currentLogo.id.toString()),!0),o.responseType="json",o.onload=function(t){200==o.status&&(d.downloadReadyResolver(),e.processResponse(o.response))},o.send(this.fData)}processResponse(t){console.log("download success",t),l.a.isNG||s.cookie("imageDownloaded","1",{path:"/"}),window.top.location.href=t.url}getMimeType(t){switch(t){case"png":return"image/png";case"jpeg":return"image/jpeg";case"pdf":return"application/pdf";case"svg":return"image/svg+xml"}return null}getFileName(t){throw new Error("This method is abstract")}isIOSDevice(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;t.length;)if(navigator.platform===t.pop())return!0;return!1}getDownloadItem(t){return void 0===this.downloadMap[t]||!1===this.downloadMap.hasOwnProperty(t)?null:this.downloadMap[t]}}},zjvR:function(t,e,a){"use strict";a.d(e,"a",function(){return o});var i=a("Pa5M");class o extends i.a{constructor(t){super(t);for(let e of this.items)e.noWatermark=!0}loadDynamic(t){return new Promise((t,e)=>{t()})}}}}]);